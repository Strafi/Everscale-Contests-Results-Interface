(this["webpackJsonpresults-interface"]=this["webpackJsonpresults-interface"]||[]).push([[0],{114:function(e,t,n){},117:function(e,t,n){},118:function(e,t,n){},119:function(e,t,n){},120:function(e,t,n){},121:function(e,t,n){},122:function(e,t,n){},123:function(e,t,n){},124:function(e,t,n){},125:function(e,t,n){},129:function(e,t,n){"use strict";n.r(t);var s=n(1),r=n(30),a=n.n(r),c=n(9),o=n(14),i=n(47),u=n(2),l=n.n(u),d=n(6),p=n(16),m=n(17),b=n(68),j=n(4),h=new(function(){function e(){Object(p.a)(this,e)}return Object(m.a)(e,[{key:"init",value:function(){this.client=Object(b.a)({space:"02r1z9muycae",environment:"master",accessToken:"3tSpi5F2qmkrKSHKTXIzywLQnoKGF3bANLyL7AMR6kg"})}},{key:"getContests",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.skip,n=void 0===t?0:t,s=e.governance,r=e.address,a={skip:n,content_type:j.DB_CONTENT_TYPES.CONTEST,order:"-sys.createdAt"};return s&&(a["fields.governance.sys.contentType.sys.id"]=j.DB_CONTENT_TYPES.GOVERNANCE,a["fields.governance.fields.name"]=s),r&&(a["fields.address"]=r),this.client.getEntries(a)}},{key:"getContestByAddress",value:function(){var e=Object(d.a)(l.a.mark((function e(t){var n,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.getContests({address:t});case 3:return n=e.sent,(s=n.items[0].fields).governance=s.governance.fields.name,e.abrupt("return",s);case 9:return e.prev=9,e.t0=e.catch(0),console.warn("No contest found in DB by address: ",t),e.abrupt("return",{governance:j.DEFAULT_GOVERNANCE.NAME});case 13:case"end":return e.stop()}}),e,this,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getGovernances",value:function(){var e=Object(d.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.client.getEntries({content_type:j.DB_CONTENT_TYPES.GOVERNANCE,order:"fields.name"});case 3:return t=e.sent,n=t.items.map((function(e){return e.fields})),e.abrupt("return",n);case 8:return e.prev=8,e.t0=e.catch(0),console.error("Failed to fetch governances: ",e.t0),e.abrupt("return",[]);case 12:case"end":return e.stop()}}),e,this,[[0,8]])})));return function(){return e.apply(this,arguments)}}()}]),e}()),f=n(34),v=n(7),y=(n(114),n(0)),O=function(){var e=Object(c.d)((function(e){return e.common.isTutorialActive})),t="app-container ".concat(e?"app-container--scroll-disabled":"");return Object(y.jsx)("div",{className:t,children:Object(y.jsxs)("div",{className:"app-container__flex-wrapper",children:[Object(y.jsx)(X,{}),Object(y.jsxs)(v.c,{children:[Object(y.jsx)(v.a,{exact:!0,path:"/",component:ve}),Object(y.jsx)(v.a,{path:"/contest",component:me})]}),e&&Object(y.jsx)(Oe,{})]})})},_=n(18),x=function(e){var t=e.onClick,n=void 0===t?function(){return!1}:t;return Object(y.jsxs)("svg",{className:"lens-icon",width:"22",height:"22",viewBox:"0 0 22 22",fill:"none",xmlns:"http://www.w3.org/2000/svg",onClick:n,children:[Object(y.jsx)("path",{d:"M16.8881 8.72414C16.8881 13.2678 13.2179 16.9483 8.69405 16.9483C4.17023 16.9483 0.5 13.2678 0.5 8.72414C0.5 4.18044 4.17023 0.5 8.69405 0.5C13.2179 0.5 16.8881 4.18044 16.8881 8.72414Z",stroke:"#6F6F6F"}),Object(y.jsx)("line",{y1:"-0.5",x2:"9.63903",y2:"-0.5",transform:"matrix(0.705884 0.708327 -0.705884 0.708327 14.3643 15.1724)",stroke:"#6F6F6F"})]})},g=function(){return Object(y.jsx)("svg",{className:"arrow-icon",width:"14",height:"9",viewBox:"0 0 14 9",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:Object(y.jsx)("path",{d:"M6.76449 9L0.338936 0.230769L13.19 0.23077L6.76449 9Z",fill:"#737373"})})},A=function(){return Object(y.jsxs)("svg",{className:"checked-icon",width:"20",height:"14",viewBox:"0 0 20 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[Object(y.jsx)("rect",{x:"1.63672",y:"5.36548",width:"9.96256",height:"1.81138",transform:"rotate(45 1.63672 5.36548)",fill:"#6F6F6F"}),Object(y.jsx)("rect",{x:"19.0166",y:"2.06494",width:"16.4416",height:"1.81138",transform:"rotate(135 19.0166 2.06494)",fill:"#6F6F6F"})]})},S=function(){return Object(y.jsx)("svg",{className:"back-icon",width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:Object(y.jsx)("path",{d:"M11.0156 2L3.00018 10.0154L11.0156 18.0309",stroke:"#5287C3",strokeWidth:"3"})})},C=function(e){var t=e.onClick,n=void 0===t?function(){return!1}:t;return Object(y.jsxs)("svg",{className:"cancel-icon",onClick:n,width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[Object(y.jsx)("path",{d:"M9.99902 2L1.99989 9.99914",stroke:"#BABABA",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),Object(y.jsx)("path",{d:"M2.00098 2L10.0001 9.99914",stroke:"#BABABA",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]})},w=n(23),k=n(22),N=n(8);var I=function(e){return new Date(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds())};function E(e){return e.map((function(e){return{place:e.place||0,reward:e.reward===j.REWARD_TRIGGER_FOR_INPUT?0:e.reward||0,id:e.id,score:e.score||0,acceptAmount:e.acceptAmount,rejectAmount:e.rejectAmount,address:e.participantAddress,link:e.fileLink}}))}function R(e){var t=[];for(var n in e){var s=e[n],r=s.acceptAmount,a=void 0===r?0:r,c=s.abstainAmount,o=void 0===c?0:c,i=s.rejectAmount,u=void 0===i?0:i,l=s.id,d=a+u+o;t.push({id:l,totalVotes:d,acceptAmount:a,abstainAmount:o,rejectAmount:u,address:n})}return t}function T(){return(T=Object(d.a)(l.a.mark((function e(t,n,s,r){var a,c,o,i,u,d;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=E(n),c=R(s),o={title:t.title,link:t.link,submissions:a,jury:c,juryRewardPercent:r},i=JSON.stringify(o),e.next=6,fetch("/api/v1/export-excel",{method:"POST",headers:{"Content-Type":"application/json"},body:i});case 6:return u=e.sent,e.next=9,u.blob();case 9:d=e.sent,function(e){var t=document.createElement("a");t.download="".concat(o.title,".xlsx"),t.href=e,t.click()}(URL.createObjectURL(d));case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var P=function(e,t,n,s){return T.apply(this,arguments)},L=n(15),F=n(3);var U=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:j.SORT_BY_VALUES_PARTICIPANTS.DEFAULT,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=e.sort((function(e,s){var r=e[t],a=s[t];return"string"===typeof r&&(r=parseInt(r,10)),"string"===typeof a&&(a=parseInt(a,10)),n?r-a:a-r}));return s},V=n(13);var J=function(e){if(!e)return!1;try{var t={};for(var n in e){var s=n.split("-"),r=Object(V.a)(s,2),a=r[0],c=r[1];if(c)for(var o=parseInt(a,10),i=parseInt(c,10),u=o;u<=i;u++)t[u]=e[n];else t[a]=e[a]}return t}catch(l){return console.error("Error while parsing rewards: ",l),!1}};function D(e,t){var n,s,r=J(t),a={},c=e.map((function(e,t,s){if(Number.isNaN(e.score))return Object(F.a)(Object(F.a)({},e),{},{place:"",reward:null});var c,o=s[t-1],i=t+1;return c=e.isRejected||e.isUnderThreshold?0:r?r[i]||0:j.REWARD_TRIGGER_FOR_INPUT,o&&o.score===e.score&&0!==e.score&&(a[t-1]=n,a[t]=c),n=c,Object(F.a)(Object(F.a)({},e),{},{place:i,reward:c})})),o={},i=+Object.keys(a).pop();for(var u in a){var l=+u,d=l===i;if((!s||s+1===l&&c[s].score===c[l].score)&&!d)o[l]=a[l];else{d&&(o[l]=a[l]);var p=Object.values(o),m=p.reduce((function(e,t){return e+t}),0)/p.length;for(var b in o)c[b].reward=m;o=Object(L.a)({},l,a[l])}s=l}return c}var B=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=n.isCountRejectAsZero,r=n.threshold,a="number"===typeof r,c=e.map((function(e){var t=0===e.marks.length?e.rejectAmount>0:e.marks.length/e.rejectAmount<1,n=Object(F.a)(Object(F.a)({},e),{},{isRejected:t});if(t)n.reward=0,n.score=0;else{var c=(n.marks.reduce((function(e,t){return e+parseInt(t.mark,10)}),0)/(s?n.marks.length+n.rejectAmount:n.marks.length)).toFixed(2);n.score=+c,n.isUnderThreshold=a&&c<r}return n.acceptAmount=n.marks.length,n})),o=U(c,j.SORT_BY_VALUES_PARTICIPANTS.SCORE),i=D(o,t);return i};var Y=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:j.SORT_BY_VALUES_JURY.DEFAULT,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=[];for(var r in e){var a=e[r],c=a.acceptAmount,o=void 0===c?0:c,i=a.abstainAmount,u=void 0===i?0:i,l=a.rejectAmount,d=void 0===l?0:l,p=a.id,m=o+d+u;s.push({address:r,acceptAmount:o,abstainAmount:u,rejectAmount:d,totalVotes:m,id:p})}var b=s.sort((function(e,s){var r=e[t],a=s[t];return"string"===typeof r&&(r=parseInt(r,10)),"string"===typeof a&&(a=parseInt(a,10)),n?r-a:a-r})),h=b.reduce((function(e,t){var n=t.address,s=t.acceptAmount,r=t.abstainAmount,a=t.rejectAmount,c=t.id;return Object(F.a)(Object(F.a)({},e),{},Object(L.a)({},n,{acceptAmount:s,abstainAmount:r,rejectAmount:a,id:c}))}),{});return h};var G=function(e){return"/contest?contestAddress=".concat(e)};var M=function(e){return"".concat(j.EXPLORER_BASE_URL).concat(e)};var W=function(e){return e.toLocaleString()};var K=function(e,t,n,s,r,a){return(e+t)/(n+s)*r*a/100};n(117);var Z=function(e){Object(w.a)(n,e);var t=Object(k.a)(n);function n(){var e;Object(p.a)(this,n);for(var s=arguments.length,r=new Array(s),a=0;a<s;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).state={inputValue:"",isInvalidAddress:!1,isSearching:!1},e.searchContest=Object(d.a)(l.a.mark((function t(){var n,s,r,a,c,o,u,d,p;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.state,s=n.inputValue,r=n.isSearching,a=e.props,c=a.contestsInfo,o=a.history,u=a.setContestInfo,s&&!r){t.next=4;break}return t.abrupt("return");case 4:return t.next=6,i.a.isAddressValid(s);case 6:if(t.sent){t.next=9;break}return t.abrupt("return",e.setState({isInvalidAddress:!0}));case 9:if(c[s]){t.next=20;break}return e.setState({isSearching:!0}),t.next=14,i.a.getContestInfo(s);case 14:if(d=t.sent,e.setState({isSearching:!1}),d){t.next=18;break}return t.abrupt("return",e.setState({isInvalidAddress:!0}));case 18:d.address=s,u(d);case 20:return p=G(s),t.abrupt("return",o.push(p));case 22:case"end":return t.stop()}}),t)}))),e.handleInputChange=function(t){e.setState({inputValue:t.target.value,isInvalidAddress:!1})},e.handleKeyPress=function(t){var n=t.shiftKey,s=t.key,r=t.altKey;"Enter"===s&&!n&&!r&&(t.preventDefault(),e.searchContest())},e}return Object(m.a)(n,[{key:"render",value:function(){var e=this.state,t=e.inputValue,n=e.isInvalidAddress,s=e.isSearching,r="search-bar-container ".concat(n?"search-bar-container--invalid":""," ").concat(s?"search-bar-container--searching":"");return Object(y.jsxs)("div",{className:r,children:[Object(y.jsx)("input",{className:"search-bar-container__input",type:"text",placeholder:"Enter contest address",value:t,onChange:this.handleInputChange,onKeyPress:this.handleKeyPress}),Object(y.jsx)(x,{onClick:this.searchContest})]})}}]),n}(s.Component),z=Object(c.b)((function(e){return{contestsInfo:e.contest.contestsInfo}}),{setContestInfo:N.i})(Z),H=Object(v.h)(z),X=(n(118),function(){var e=Object(v.g)("/contest"),t=Object(c.c)();return Object(y.jsxs)("header",{className:"header-container",children:[Object(y.jsx)(o.b,{to:"/",children:Object(y.jsx)("h1",{children:"Free TON Contests Results"})}),e&&Object(y.jsxs)(o.b,{to:"/",className:"header-container__back-button",children:[Object(y.jsx)(S,{}),Object(y.jsx)("p",{children:"Back"})]}),Object(y.jsx)(H,{}),Object(y.jsx)("div",{className:"header-container__address-explanation",onClick:function(){return t(Object(_.c)(!0))},children:"Where to find contest address?"})]})}),q=function(e){var t=e.setJuryView,n=e.exportExcel,s=e.isJuryView,r=e.juryRewardPercent,a=e.setJuryRewardPercent,c="number"===typeof r&&!Number.isNaN(r),o="contest-header__participants-view-button ".concat(s?"":"contest-header__participants-view-button--active"),i="contest-header__jury-view-button ".concat(s?"contest-header__jury-view-button--active":""),u="contest-header__reward-input-container ".concat(c?"contest-header__reward-input-container--filled":"");return Object(y.jsxs)("div",{className:"contest-header__controls contest-header__controls--center",children:[Object(y.jsxs)("div",{className:"contest-header__view-switcher",children:[Object(y.jsx)("div",{onClick:function(){return t(!1)},className:o,children:"Participants"}),Object(y.jsx)("div",{onClick:function(){return t(!0)},className:i,children:"Jury"})]}),s&&Object(y.jsxs)("div",{className:u,children:[Object(y.jsx)("input",{className:"contest-header__reward-input",type:"text",placeholder:"Enter jury reward %",value:r,onChange:function(e){if(!e.target.value)return a(void 0);var t=+e.target.value;t&&!Number.isNaN(t)&&a(t)}}),Object(y.jsx)(A,{})]}),Object(y.jsx)("div",{onClick:n,className:"contest-header__export-button",children:"Export to .xlsx"})]})},Q=(n(119),function(e){var t=e.contestInfo,n=e.setJuryView,s=e.exportExcel,r=e.isJuryView,a=e.juryRewardPercent,c=e.setJuryRewardPercent,o=e.isControlsVisible,i=e.isCountRejectAsZero,u=e.setIsCountRejectAsZero,l=e.threshold,d=e.setThreshold,p=Date.now(),m=p<1e3*t.contestDeadline,b=p>1e3*t.contestDeadline&&p<1e3*t.votingDeadline,j="contest-header__status ".concat(m?"contest-header__status--underway":""," ").concat(b?"contest-header__status--voting":""),h=m?"(Underway)":b?"(Voting)":"";return Object(y.jsxs)("div",{className:"contest-header",children:[Object(y.jsxs)("div",{className:"contest-header__controls",children:[Object(y.jsxs)("div",{children:[Object(y.jsxs)("div",{className:"contest-header__header",children:["Results ",Object(y.jsx)("span",{className:j,children:h})]}),Object(y.jsx)("a",{href:t.link,target:"_blank",rel:"noreferrer",className:"contest-header__title",children:t.title})]}),Object(y.jsxs)(_e,{height:90,selectedItem:"Options",children:[Object(y.jsxs)("div",{className:"contest-header__options-list-item",children:[Object(y.jsx)("input",{value:i,onChange:function(e){return u(e.target.checked)},type:"checkbox",id:"cbcountzero"}),Object(y.jsx)("label",{htmlFor:"cbcountzero",children:'Count "Reject" as 0'})]}),Object(y.jsxs)("div",{className:"contest-header__options-list-item",children:[Object(y.jsx)("input",{value:l,onChange:function(e){return function(e){if(!e)return d(void 0);var t=+e;!Number.isNaN(t)&&t>=0&&t<=10&&d(t)}(e.target.value)},type:"number",id:"thresholdinput",className:"contest-header__threshold-input"}),Object(y.jsx)("label",{htmlFor:"thresholdinput",children:"Threshold"})]})]})]}),o&&Object(y.jsx)(q,{setJuryView:n,exportExcel:s,setJuryRewardPercent:c,isJuryView:r,juryRewardPercent:a})]})}),$=function(e){var t=e.children,n=e.className,s=e.onClick,r=void 0===s?function(){return!1}:s,a=e.styles,c=void 0===a?{}:a,o="contest-table__cell contest-table__cell--th";return n&&(o+=" "+n),Object(y.jsx)("th",{style:c,onClick:r,className:o,children:t})},ee={color:"#0F8CFF",fontSize:"26px"},te={color:"#0D9F1C"},ne={color:"#D20808"},se=function(e){var t=e.submissionsSortParams,n=e.sortSubmissions,s=t.field,r=t.isAskending,a="".concat(s===j.SORT_BY_VALUES_PARTICIPANTS.PLACE?"contest-table__cell--active ".concat(r?"contest-table__cell--askending":""):"contest-table__cell--selectable"),c="".concat(s===j.SORT_BY_VALUES_PARTICIPANTS.SUBMISSION_ID?"contest-table__cell--active ".concat(r?"contest-table__cell--askending":""):"contest-table__cell--selectable"),o="".concat(s===j.SORT_BY_VALUES_PARTICIPANTS.ACCEPTED?"contest-table__cell--active ".concat(r?"contest-table__cell--askending":""):"contest-table__cell--selectable"),i="".concat(s===j.SORT_BY_VALUES_PARTICIPANTS.REJECTED?"contest-table__cell--active ".concat(r?"contest-table__cell--askending":""):"contest-table__cell--selectable");return Object(y.jsxs)("tr",{className:"contest-table__row",children:[Object(y.jsxs)($,{className:a,onClick:function(){return n(j.SORT_BY_VALUES_PARTICIPANTS.PLACE)},children:["Place",Object(y.jsx)(g,{})]}),Object(y.jsx)($,{children:"Reward"}),Object(y.jsxs)($,{className:c,onClick:function(){return n(j.SORT_BY_VALUES_PARTICIPANTS.SUBMISSION_ID)},children:["Submission \u2116",Object(y.jsx)(g,{})]}),Object(y.jsx)($,{children:"Avg. Score"}),Object(y.jsxs)($,{className:o,onClick:function(){return n(j.SORT_BY_VALUES_PARTICIPANTS.ACCEPTED)},children:["Accepted",Object(y.jsx)(g,{})]}),Object(y.jsxs)($,{className:i,onClick:function(){return n(j.SORT_BY_VALUES_PARTICIPANTS.REJECTED)},children:["Rejected",Object(y.jsx)(g,{})]}),Object(y.jsx)($,{className:"contest-table__cell--wallet",children:"Wallet"})]})},re=function(e){var t=e.jurySortParams,n=e.sortJury,s=t.field,r=t.isAskending,a="".concat(s===j.SORT_BY_VALUES_JURY.JURY_ID?"contest-table__cell--active ".concat(r?"contest-table__cell--askending":""):"contest-table__cell--selectable"),c="".concat(s===j.SORT_BY_VALUES_JURY.TOTAL_VOTES?"contest-table__cell--active ".concat(r?"contest-table__cell--askending":""):"contest-table__cell--selectable"),o="".concat(s===j.SORT_BY_VALUES_JURY.ACCEPTED?"contest-table__cell--active ".concat(r?"contest-table__cell--askending":""):"contest-table__cell--selectable"),i="".concat(s===j.SORT_BY_VALUES_JURY.ABSTAINED?"contest-table__cell--active ".concat(r?"contest-table__cell--askending":""):"contest-table__cell--selectable"),u="".concat(s===j.SORT_BY_VALUES_JURY.REJECTED?"contest-table__cell--active ".concat(r?"contest-table__cell--askending":""):"contest-table__cell--selectable");return Object(y.jsxs)("tr",{className:"contest-table__row",children:[Object(y.jsxs)($,{className:a,onClick:function(){return n(j.SORT_BY_VALUES_JURY.JURY_ID)},children:["Jury \u2116",Object(y.jsx)(g,{})]}),Object(y.jsx)($,{children:"Reward"}),Object(y.jsxs)($,{className:c,onClick:function(){return n(j.SORT_BY_VALUES_JURY.TOTAL_VOTES)},children:["Votes Count",Object(y.jsx)(g,{})]}),Object(y.jsxs)($,{className:o,onClick:function(){return n(j.SORT_BY_VALUES_JURY.ACCEPTED)},children:["Accepted",Object(y.jsx)(g,{})]}),Object(y.jsxs)($,{className:i,onClick:function(){return n(j.SORT_BY_VALUES_JURY.ABSTAINED)},children:["Abstained",Object(y.jsx)(g,{})]}),Object(y.jsxs)($,{className:u,onClick:function(){return n(j.SORT_BY_VALUES_JURY.REJECTED)},children:["Rejected",Object(y.jsx)(g,{})]}),Object(y.jsx)($,{className:"contest-table__cell--wallet",children:"Wallet"})]})},ae=function(e){var t=e.contestInfo,n=e.isJuryView,s=e.submissionsSortParams,r=e.jurySortParams,a=e.sortSubmissions,c=e.sortJury,o=t.title;return Object(y.jsxs)("thead",{className:"contest-table__header",children:[Object(y.jsx)("tr",{className:"contest-table__header-hidden-line",children:Object(y.jsx)("th",{colSpan:"7"})}),Object(y.jsx)("tr",{className:"contest-table__header-hidden-line",children:Object(y.jsx)("th",{colSpan:"7",style:ee,children:Object(y.jsx)("a",{href:t.link,children:o})})}),n?Object(y.jsx)(re,{jurySortParams:r,sortJury:c}):Object(y.jsx)(se,{submissionsSortParams:s,sortSubmissions:a})]})},ce=function(e){var t=e.children,n=e.className,s=e.styles,r=void 0===s?{}:s,a="contest-table__cell";return n&&(a+=" "+n),Object(y.jsx)("td",{style:r,className:a,children:t})},oe=function(e){var t=e.contestAddress,n=e.submissionId,r=Object(s.useState)(),a=Object(V.a)(r,2),o=a[0],i=a[1],u=Object(c.c)(),l=function(){"number"!==typeof o||Number.isNaN(o)||u(Object(N.m)({contestAddress:t,submissionId:n,reward:o}))};return Object(y.jsx)("input",{className:"contest-table__reward-input",type:"text",placeholder:"Enter reward",value:o,onChange:function(e){if(!e.target.value)return i(void 0);var t=+e.target.value;"number"!==typeof t||Number.isNaN(t)||i(t)},onBlur:l,onKeyPress:function(e){var t=e.shiftKey,n=e.key,s=e.altKey;"Enter"===n&&!t&&!s&&(e.preventDefault(),l())}})},ie=function(e){var t,n=e.contestSubmissions,s=e.isJuryView,r=e.contestJury,a=e.juryRewardPercent,o=e.contestAddress,i=Object(c.c)(),u=0,l=n.map((function(e,t){"number"===typeof e.reward&&!Number.isNaN(e.reward)&&e.reward>0&&(u+=e.reward);var n=!e.score||Number.isNaN(e.score)?"":e.score.toFixed(2),s="contest-table__row ".concat(0===t||t%2===0?"contest-table__row--grey":""," ").concat(e.isRejected||e.isUnderThreshold?"contest-table__row--rejected":""),r=M(e.participantAddress),a=!e.isRejected&&!e.isUnderThreshold&&e.reward===j.REWARD_TRIGGER_FOR_INPUT,c="number"===typeof e.reward?W(e.reward):"";return Object(y.jsxs)("tr",{className:s,children:[Object(y.jsx)(ce,{children:e.place}),Object(y.jsx)(ce,{children:a?Object(y.jsx)(oe,{contestAddress:o,submissionId:e.id}):Object(y.jsxs)(y.Fragment,{children:[c,c&&!e.isRejected&&!e.isUnderThreshold&&Object(y.jsx)(C,{onClick:function(){return t=e.id,void i(Object(N.m)({contestAddress:o,submissionId:t,reward:j.REWARD_TRIGGER_FOR_INPUT}));var t}})]})}),Object(y.jsx)(ce,{children:e.fileLink?Object(y.jsx)("a",{href:e.fileLink,tabIndex:"-1",target:"_blank",rel:"noreferrer",children:e.id}):e.id}),Object(y.jsx)(ce,{children:n}),Object(y.jsx)(ce,{styles:te,children:e.acceptAmount}),Object(y.jsx)(ce,{styles:ne,children:e.rejectAmount}),Object(y.jsx)(ce,{className:"contest-table__cell--wallet",children:Object(y.jsx)("a",{tabIndex:"-1",href:r,target:"_blank",rel:"noreferrer",children:e.participantAddress})})]},"".concat(e.participantAddress).concat(e.id))})),d=0,p=0,m=0,b=0;if(s){var h=[];Object.values(r).forEach((function(e){var t=e.acceptAmount,n=void 0===t?0:t,s=e.abstainAmount,r=void 0===s?0:s,a=e.rejectAmount;d+=n,p+=void 0===a?0:a,m+=r}));var f=function(e){var t=r[e],n=t.acceptAmount,s=void 0===n?0:n,c=t.abstainAmount,l=void 0===c?0:c,m=t.rejectAmount,j=void 0===m?0:m,f=t.id,v=s+j+l,O=void 0;"number"===typeof a&&!Number.isNaN(a)&&u&&(O=K(s,j,d,p,u,a),b+=O);var _=0===h.length||h.length%2===0,x="contest-table__row ".concat(_?"contest-table__row--grey":""),g=M(e),A="number"===typeof O?W(+O.toFixed(2)):"";h.push(Object(y.jsxs)("tr",{className:x,children:[Object(y.jsxs)(ce,{children:[Object(y.jsx)(C,{onClick:function(){return function(e){i(Object(N.k)(o,e))}(e)}}),f]}),Object(y.jsx)(ce,{children:A}),Object(y.jsx)(ce,{children:v}),Object(y.jsx)(ce,{styles:te,children:s}),Object(y.jsx)(ce,{children:l}),Object(y.jsx)(ce,{styles:ne,children:j}),Object(y.jsx)(ce,{className:"contest-table__cell--wallet",children:Object(y.jsx)("a",{href:g,target:"_blank",rel:"noreferrer",children:e})})]},e))};for(var v in r)f(v);t=h}else t=l;return Object(y.jsxs)("tbody",{children:[t,Object(y.jsxs)("tr",{className:"contest-table__row contest-table__row--total-row",children:[Object(y.jsx)(ce,{children:"Total"}),s?Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(ce,{children:b?W(+b.toFixed(2)):""}),Object(y.jsx)(ce,{children:d+p+m}),Object(y.jsx)(ce,{styles:te,children:d}),Object(y.jsx)(ce,{children:m}),Object(y.jsx)(ce,{styles:ne,children:p}),Object(y.jsx)(ce,{})]}):Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(ce,{children:W(u)||""}),Object(y.jsx)(ce,{}),Object(y.jsx)(ce,{}),Object(y.jsx)(ce,{}),Object(y.jsx)(ce,{}),Object(y.jsx)(ce,{})]})]})]})},ue=(n(120),{field:j.SORT_BY_VALUES_PARTICIPANTS.DEFAULT,isAskending:!0}),le={field:j.SORT_BY_VALUES_JURY.DEFAULT,isAskending:!0},de=function(e){Object(w.a)(n,e);var t=Object(k.a)(n);function n(){var e;Object(p.a)(this,n);for(var s=arguments.length,r=new Array(s),a=0;a<s;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).state={isJuryView:!1,isCountRejectAsZero:!1,threshold:void 0,juryRewardPercent:void 0,submissionsSortParams:ue,jurySortParams:le},e.fetchSubmissionsInfo=Object(d.a)(l.a.mark((function t(){var n,s,r,a,c,o,u,d,p,m,b,j,h,f,v,y,O,_,x=arguments;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=x.length>0&&void 0!==x[0]&&x[0],s=e.props,r=s.addressFromUrl,a=s.contestInfo,c=s.setContestInfo,o=s.setSubmissionsInfo,u=s.setJuryInfo,d=s.history,p=e.state,m=p.jurySortParams,b=p.isCountRejectAsZero,j=p.threshold,t.next=5,i.a.isAddressValid(r);case 5:if(t.sent){t.next=8;break}return t.abrupt("return",d.push("/"));case 8:if(h=a){t.next=14;break}return t.next=12,e.getContestFullInfo(r);case 12:h=t.sent,c(h);case 14:return h.juryRewardPercent&&e.setJuryRewardPercent(h.juryRewardPercent),t.next=17,i.a.getContestSubmissionsAndJurors(r,n);case 17:f=t.sent,v=f.submissionsWithStats,y=f.juryStats,O=B(v,h.rewards,{isCountRejectAsZero:b,threshold:j}),_=Y(y,m.field,m.isAskending),o(r,O),u(r,_);case 24:case"end":return t.stop()}}),t)}))),e.getContestFullInfo=function(){var e=Object(d.a)(l.a.mark((function e(t){var n,s,r,a,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([i.a.getContestInfo(t),h.getContestByAddress(t)]);case 2:return n=e.sent,s=Object(V.a)(n,2),r=s[0],a=s[1],c=a.governance,e.abrupt("return",Object(F.a)(Object(F.a)(Object(F.a)({},r),a),{},{address:t,governance:c}));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.exportExcel=Object(d.a)(l.a.mark((function t(){var n,s,r,a,c;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props,s=n.contestInfo,r=n.contestSubmissions,a=n.contestJury,c=e.state.juryRewardPercent,t.prev=2,t.next=5,P(s,r,a,c);case 5:t.next=10;break;case 7:t.prev=7,t.t0=t.catch(2),console.error("Table export failed: ",t.t0);case 10:case"end":return t.stop()}}),t,null,[[2,7]])}))),e.setJuryView=function(t){e.setState({isJuryView:t})},e.setJuryRewardPercent=function(t){e.setState({juryRewardPercent:t})},e.setIsCountRejectAsZero=function(t){var n=e.props,s=n.addressFromUrl,r=n.contestSubmissions,a=n.contestInfo,c=n.setSubmissionsInfo,o=e.state.threshold,i=B(r,a.rewards,{isCountRejectAsZero:t,threshold:o});e.setState({isCountRejectAsZero:t,submissionsSortParams:ue}),c(s,i)},e.setThreshold=function(t){var n=e.props,s=n.addressFromUrl,r=n.contestSubmissions,a=n.contestInfo,c=n.setSubmissionsInfo,o=e.state.isCountRejectAsZero,i=B(r,a.rewards,{threshold:t,isCountRejectAsZero:o});e.setState({threshold:t,submissionsSortParams:ue}),c(s,i)},e.sortJury=function(t){var n=e.props,s=n.contestJury,r=n.setJuryInfo,a=n.addressFromUrl,c=e.state.jurySortParams,o=c.field,i=c.isAskending,u={field:t,isAskending:t===o?!i:i};r(a,Y(s,u.field,u.isAskending)),e.setState({jurySortParams:u})},e.sortSubmissions=function(t){var n=e.props,s=n.contestSubmissions,r=n.setSubmissionsInfo,a=n.addressFromUrl,c=e.state.submissionsSortParams,o=c.field,i=c.isAskending,u={field:t,isAskending:t===o?!i:i};r(a,U(s,u.field,u.isAskending)),e.setState({submissionsSortParams:u})},e}return Object(m.a)(n,[{key:"componentDidMount",value:function(){try{this.fetchSubmissionsInfo()}catch(e){console.error("Fetching submissions failed: ",e),setTimeout(this.fetchSubmissionsInfo,5e3)}}},{key:"componentDidUpdate",value:function(e){try{var t=this.props,n=t.addressFromUrl,s=t.removedJurorsForContest;e.addressFromUrl!==n?(this.setJuryView(!1),this.setState({isJuryView:!1,juryRewardPercent:void 0,submissionsSortParams:ue,jurySortParams:le}),this.fetchSubmissionsInfo()):e.removedJurorsForContest!==s&&this.fetchSubmissionsInfo(!0)}catch(r){console.error("Fetching submissions failed: ",r),setTimeout(this.fetchSubmissionsInfo,5e3)}}},{key:"render",value:function(){var e=this.props,t=e.contestSubmissions,n=e.contestInfo,s=e.contestJury,r=e.addressFromUrl,a=this.state,c=a.isJuryView,o=a.juryRewardPercent,i=a.submissionsSortParams,u=a.jurySortParams,l=a.isCountRejectAsZero,d=a.threshold,p=!!(null===t||void 0===t?void 0:t.length),m=c&&s&&!Object.keys(s).length||!c&&!p,b=!n||!t||!s;return Object(y.jsxs)("div",{className:"contest",children:[n&&Object(y.jsx)(Q,{contestInfo:n,isJuryView:c,juryRewardPercent:o,setJuryView:this.setJuryView,setJuryRewardPercent:this.setJuryRewardPercent,exportExcel:this.exportExcel,isControlsVisible:p,isCountRejectAsZero:l,setIsCountRejectAsZero:this.setIsCountRejectAsZero,threshold:d,setThreshold:this.setThreshold}),p&&!m&&Object(y.jsx)("div",{className:"contest-table-wrapper",children:Object(y.jsxs)("table",{className:"contest-table",children:[Object(y.jsx)(ae,{contestInfo:n,isJuryView:c,submissionsSortParams:i,jurySortParams:u,sortSubmissions:this.sortSubmissions,sortJury:this.sortJury}),Object(y.jsx)(ie,{contestSubmissions:t,contestJury:s,contestAddress:r,isJuryView:c,juryRewardPercent:o})]})}),b&&Object(y.jsx)(ye,{}),!b&&m&&Object(y.jsx)(ye,{isFailed:!0})]})}}]),n}(s.Component),pe=Object(c.b)((function(e,t){var n=e.contest,s=t.location,r=n.contestsInfo,a=n.submissionsInfo,c=n.jurorsInfo,o=n.removedJurors,i=s.search,u=new URLSearchParams(i).get("contestAddress");return{contestInfo:r[u],contestSubmissions:a[u],contestJury:c[u],removedJurorsForContest:o[u],addressFromUrl:u}}),{setContestInfo:N.i,setSubmissionsInfo:N.l,setJuryInfo:N.j})(de),me=Object(v.h)(pe),be=n(70),je=function(e){var t=e.contest,n=e.isGrey,s=function(e){var t=Date.now(),n=t<1e3*e.contestDeadline,s=t>1e3*e.contestDeadline&&t<1e3*e.votingDeadline,r=I(n?new Date(1e3*e.contestDeadline):new Date(1e3*e.votingDeadline)),a=r.toLocaleDateString("en-US",{month:"long",day:"numeric"}),c=r.toLocaleDateString("en-US",{year:"numeric"}),o=r.toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"});return n?Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)("span",{className:"contests-list__item-date--underway",children:"Underway"})," until ",a,", ",c,", ",o," UTC"]}):s?Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)("span",{className:"contests-list__item-date--voting",children:"Voting"})," until ",a,", ",c,", ",o," UTC"]}):Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)("span",{className:"contests-list__item-date--ended",children:"Ended"})," ",a,", ",c,", ",o," UTC"]})}(t),r=G(t.address),a="contests-list__item ".concat(n?"contests-list__item--grey":"");return Object(y.jsxs)(o.b,{to:r,className:a,children:[Object(y.jsx)("div",{className:"contests-list__item-title",children:t.title}),Object(y.jsx)("div",{className:"contests-list__item-date",children:s})]})},he=function(e){var t=e.governances,n=e.selectedGovernance,s=Object(c.c)(),r=t.filter((function(e){return e.name!==n.name})).map((function(e){return Object(y.jsx)("div",{className:"options-list__list-item",onClick:function(){return s(Object(_.d)(e))},children:e.fullName},e.name)})),a="Subgov: ".concat(n.fullName);return Object(y.jsxs)("div",{className:"subgov-switcher",children:[Object(y.jsx)("div",{className:"subgov-switcher__title",children:"Contests"}),Object(y.jsx)(_e,{selectedItem:a,children:r})]})},fe=(n(121),function(e){Object(w.a)(n,e);var t=Object(k.a)(n);function n(){var e;Object(p.a)(this,n);for(var s=arguments.length,r=new Array(s),a=0;a<s;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).state={governances:[],isLoaderVisible:!1},e.fetchGovernances=Object(d.a)(l.a.mark((function t(){var n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h.getGovernances();case 2:n=t.sent,e.setState({governances:n});case 4:case"end":return t.stop()}}),t)}))),e.fetchContests=Object(d.a)(l.a.mark((function t(){var n,s,r,a,c;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props,s=n.setBulkContestsInfo,r=n.selectedGovernance,e.lastSelectedGovernance=r.name,t.next=4,h.getContests({governance:r.name});case 4:return a=t.sent,t.next=7,Promise.all(a.items.map((function(t){return e.getContestFullInfo(t)})));case 7:c=t.sent,e.lastSelectedGovernance===r.name&&(s(c),e.setState({isLoaderVisible:!1}));case 9:case"end":return t.stop()}}),t)}))),e.getContestFullInfo=function(){var e=Object(d.a)(l.a.mark((function e(t){var n,s,r,a,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.fields,s=n.address,r=n.governance,a=Object(be.a)(n,["address","governance"]),e.next=3,i.a.getContestInfo(s);case 3:return c=e.sent,e.abrupt("return",Object(F.a)(Object(F.a)(Object(F.a)({},c),a),{},{address:s,governance:r.fields.name}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.renderContestItems=function(){return e.props.contestsInfo.map((function(e,t){return Object(y.jsx)(je,{isGrey:t%2===0||0===t,contest:e},e.address)}))},e}return Object(m.a)(n,[{key:"componentDidMount",value:function(){var e=Object(d.a)(l.a.mark((function e(){var t,n=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,(!(t=this.props.contestsInfo)||t.length<=1)&&this.setState({isLoaderVisible:!0}),e.next=5,this.fetchGovernances();case 5:return e.next=7,this.fetchContests();case 7:e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.error("Fetching contests failed: ",e.t0),setTimeout(Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.fetchGovernances();case 2:return e.next=4,n.fetchContests();case 4:case"end":return e.stop()}}),e)}))),5e3);case 13:case"end":return e.stop()}}),e,this,[[0,9]])})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=Object(d.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t.selectedGovernance.name===this.props.selectedGovernance.name){e.next=5;break}return this.setState({isLoaderVisible:!0}),e.next=5,this.fetchContests();case 5:e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("Fetching contests failed: ",e.t0),setTimeout(this.fetchContests,5e3);case 11:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props,t=e.contestsInfo,n=e.selectedGovernance,s=this.state,r=s.governances,a=s.isLoaderVisible;return Object(y.jsxs)("div",{className:"contests-list",children:[Object(y.jsx)(he,{governances:r,selectedGovernance:n}),a?Object(y.jsx)(ye,{}):(null===t||void 0===t?void 0:t.length)?this.renderContestItems():Object(y.jsx)(ye,{isFailed:!0})]})}}]),n}(s.Component)),ve=Object(c.b)((function(e){var t=e.contest,n=e.common,s=t.contestsInfo,r=n.selectedGovernance;return{contestsInfo:Object.values(s),selectedGovernance:r}}),{setBulkContestsInfo:N.h})(fe),ye=(n(122),function(e){var t=e.isFailed,n=t?"/load-failed.png":"/loader.gif",s=t?"Nothing here :(":"Loading...";return Object(y.jsx)("div",{className:"loader",children:Object(y.jsx)("img",{className:"loader__cat",src:n,alt:s})})}),Oe=(n(123),function(){var e=Object(s.useRef)(null),t=Object(c.c)();return Object(y.jsx)("div",{ref:e,className:"tutorial-popup",onClick:function(n){e&&n.target===e.current&&t(Object(_.c)(!1))},children:Object(y.jsxs)("div",{className:"tutorial-popup__container",children:[Object(y.jsx)(C,{onClick:function(){return t(Object(_.c)(!1))}}),Object(y.jsx)("div",{className:"tutorial-popup__header",children:"Where to find contest address?"}),Object(y.jsxs)("ol",{children:[Object(y.jsxs)("li",{className:"tutorial-popup__list-item",children:["Go to ",Object(y.jsx)("a",{href:j.MAIN_GOV_LINK,target:"_blank",rel:"noreferrer",children:"https://gov.freeton.org"})]}),Object(y.jsx)("li",{className:"tutorial-popup__list-item",children:"Find a contest you want to check"}),Object(y.jsxs)("li",{className:"tutorial-popup__list-item",children:["Click here to copy the contest address",Object(y.jsx)("img",{src:"/tutorial-1.jpg",alt:""})]}),Object(y.jsxs)("li",{className:"tutorial-popup__list-item",style:{marginBottom:0},children:["Paste contest address into the search bar",Object(y.jsx)("img",{src:"/tutorial-2.jpg",alt:""})]}),Object(y.jsx)("li",{className:"tutorial-popup__list-item",children:"Hit Enter or click on the search icon"}),Object(y.jsx)("li",{className:"tutorial-popup__list-item",children:"Great! You are amazing!"})]})]})})}),_e=(n(124),function(e){var t=e.children,n=e.selectedItem,r=e.height,a=void 0===r?252:r,c=e.width,o=void 0===c?245:c,i=e.isDisabled,u=Object(s.useRef)(null),l=Object(s.useRef)(null),d=Object(s.useState)(!1),p=Object(V.a)(d,2),m=p[0],b=p[1],j=Object(s.useCallback)((function(e){var t;!(null===u||void 0===u||null===(t=u.current)||void 0===t?void 0:t.contains(e.target))&&m&&b(!1)}),[m]);Object(s.useEffect)((function(){return document.addEventListener("click",j),function(){document.removeEventListener("click",j)}}),[j]);var h="options-list__list ".concat(m?"options-list__list--visible":""),f="options-list ".concat(m?"options-list--active":""," ").concat(i?"options-list--disabled":"");return Object(y.jsxs)("div",{ref:u,onClick:function(e){var t;i||(null===l||void 0===l||null===(t=l.current)||void 0===t?void 0:t.contains(e.target))||b(!m)},className:f,style:{"--width":"".concat(o,"px")},children:[n,Object(y.jsx)(g,{}),Object(y.jsx)("div",{ref:l,className:h,style:{"--height":"".concat(a,"px")},children:t})]})});n(125);n(126).config(),i.a.init(),h.init(),a.a.render(Object(y.jsx)(c.a,{store:f.a,children:Object(y.jsx)(o.a,{children:Object(y.jsx)(O,{})})}),document.getElementById("root"))},18:function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return r})),n.d(t,"d",(function(){return a})),n.d(t,"c",(function(){return c}));var s="common/SET_SELECTED_SUBGOV",r="common/SET_IS_TUTORIAL_ACTIVE",a=function(e){return function(t){t({type:s,payload:e})}},c=function(e){return function(t){t({type:r,payload:e})}}},34:function(e,t,n){"use strict";var s=n(19),r=n(61),a=n(15),c=n(35),o=n(3),i=n(8),u={contestsInfo:{},submissionsInfo:{},jurorsInfo:{},removedJurors:{}};var l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,t=arguments.length>1?arguments[1]:void 0,n=t.type,s=t.payload;switch(n){case i.c:var r=Object(o.a)({},e.contestsInfo);return r[s.address]=s,Object(o.a)(Object(o.a)({},e),{},{contestsInfo:r});case i.b:var l={};return s.forEach((function(e){l[e.address]=e})),Object(o.a)(Object(o.a)({},e),{},{contestsInfo:l});case i.a:var d=Object(o.a)({},e.contestsInfo);return s.forEach((function(e){d[e.address]=e})),Object(o.a)(Object(o.a)({},e),{},{contestsInfo:d});case i.f:var p=s.address,m=s.submissions,b=Object(o.a)({},e.submissionsInfo);return b[p]=m,Object(o.a)(Object(o.a)({},e),{},{submissionsInfo:b});case i.d:var j=s.address,h=s.juryStats,f=Object(o.a)({},e.jurorsInfo);return f[j]=h,Object(o.a)(Object(o.a)({},e),{},{jurorsInfo:f});case i.g:var v=s.contestAddress,y=s.submissionId,O=s.reward,_=Object(o.a)({},e.submissionsInfo),x=_[v],g=x.map((function(e){return e.id===y?Object(o.a)(Object(o.a)({},e),{},{reward:O}):e}));return _[v]=g,Object(o.a)(Object(o.a)({},e),{},{submissionsInfo:_});case i.e:var A=s.address,S=s.juryAddr,C=Object(c.a)(e.removedJurors[A]||[]);C.push(S);var w=Object(o.a)(Object(o.a)({},e.removedJurors),{},Object(a.a)({},A,C));return Object(o.a)(Object(o.a)({},e),{},{removedJurors:w});default:return e}},d=n(18),p=n(4),m={selectedGovernance:{name:p.DEFAULT_GOVERNANCE.NAME,fullName:p.DEFAULT_GOVERNANCE.FULL_NAME},isTutorialActive:!1};var b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments.length>1?arguments[1]:void 0,n=t.type,s=t.payload;switch(n){case d.b:return Object(o.a)(Object(o.a)({},e),{},{selectedGovernance:s||m.selectedGovernance});case d.a:return Object(o.a)(Object(o.a)({},e),{},{isTutorialActive:s});default:return e}},j=Object(s.c)({contest:l,common:b}),h=[r.a],f=s.d.apply(void 0,[s.a.apply(void 0,h)].concat([])),v=Object(s.e)(j,{},f);t.a=v},4:function(e,t){e.exports={SORT_BY_VALUES_PARTICIPANTS:{DEFAULT:"place",PLACE:"place",REWARD:"reward",SUBMISSION_ID:"id",SCORE:"score",ACCEPTED:"acceptAmount",REJECTED:"rejectAmount"},SORT_BY_VALUES_JURY:{DEFAULT:"id",REWARD:"reward",JURY_ID:"id",TOTAL_VOTES:"totalVotes",ACCEPTED:"acceptAmount",ABSTAINED:"abstainAmount",REJECTED:"rejectAmount"},EMPTY_ADDRESS:"0:0000000000000000000000000000000000000000000000000000000000000000",EXPLORER_BASE_URL:"https://ton.live/accounts/accountDetails?id=",DB_CONTENT_TYPES:{CONTEST:"contest",GOVERNANCE:"governance"},DEFAULT_GOVERNANCE:{NAME:"main",FULL_NAME:"Main"},REWARD_TRIGGER_FOR_INPUT:-1,MAIN_GOV_LINK:"https://gov.freeton.org/"}},42:function(e,t,n){"use strict";t.a={"ABI version":2,header:["pubkey","time"],functions:[{name:"constructor",inputs:[{name:"title",type:"bytes"},{name:"link",type:"bytes"},{name:"hash",type:"uint256"},{name:"juryAddr",type:"address"},{name:"juryKeys",type:"uint256[]"}],outputs:[]},{name:"setupContest",inputs:[{name:"startsIn",type:"uint16"},{name:"lastsFor",type:"uint16"}],outputs:[]},{name:"setupJurors",inputs:[{name:"jurors",type:"address[]"}],outputs:[]},{name:"rejectApplicant",inputs:[],outputs:[]},{name:"submitWithContact",inputs:[{name:"participant",type:"address"},{name:"forumLink",type:"bytes"},{name:"fileLink",type:"bytes"},{name:"hash",type:"uint256"},{name:"contact",type:"address"}],outputs:[]},{name:"submit",inputs:[{name:"participant",type:"address"},{name:"forumLink",type:"bytes"},{name:"fileLink",type:"bytes"},{name:"hash",type:"uint256"}],outputs:[]},{name:"openContest",inputs:[],outputs:[]},{name:"closeContest",inputs:[],outputs:[]},{name:"openVoting",inputs:[],outputs:[]},{name:"closeVoting",inputs:[],outputs:[]},{name:"rejectVote",inputs:[],outputs:[]},{name:"voteFor",inputs:[{name:"id",type:"uint16"},{name:"mark",type:"uint32"}],outputs:[]},{name:"voteForCommented",inputs:[{name:"id",type:"uint16"},{name:"mark",type:"uint32"},{name:"comment",type:"bytes"}],outputs:[]},{name:"abstain",inputs:[{name:"id",type:"uint16"},{name:"comment",type:"bytes"}],outputs:[]},{name:"voteAgainst",inputs:[{name:"id",type:"uint16"},{name:"comment",type:"bytes"}],outputs:[]},{name:"finalizeResults",inputs:[],outputs:[]},{name:"votingEndsIn",inputs:[],outputs:[{name:"daysLeft",type:"uint64"}]},{name:"contestStartCountdown",inputs:[],outputs:[{name:"secondsLeft",type:"int64"}]},{name:"contestCountdown",inputs:[],outputs:[{name:"secondsLeft",type:"int64"}]},{name:"votingCountdown",inputs:[],outputs:[{name:"secondsLeft",type:"int64"}]},{name:"getId",inputs:[{name:"addr",type:"address"}],outputs:[{name:"value0",type:"uint16"}]},{name:"listContenders",inputs:[],outputs:[{name:"ids",type:"uint16[]"},{name:"addresses",type:"address[]"}]},{name:"getStatsFor",inputs:[{name:"id",type:"uint16"}],outputs:[{name:"totalPoints",type:"uint64"},{name:"avgHi",type:"uint32"},{name:"avgLo",type:"uint32"},{name:"jurorsVoted",type:"uint16"},{name:"accepted",type:"uint16"},{name:"abstained",type:"uint16"},{name:"rejected",type:"uint16"}]},{name:"getVotesPerJuror",inputs:[{name:"id",type:"uint16"}],outputs:[{name:"jurorsFor",type:"address[]"},{name:"marks",type:"uint32[]"},{name:"commentsFor",type:"bytes[]"},{name:"jurorsAbstained",type:"address[]"},{name:"commentsAbstained",type:"bytes[]"},{name:"jurorsAgainst",type:"address[]"},{name:"commentsAgainst",type:"bytes[]"}]},{name:"getJuryStats",inputs:[],outputs:[{components:[{name:"id",type:"uint16"},{name:"addr",type:"address"}],name:"jury",type:"map(uint256,tuple)"}]},{name:"getContestStats",inputs:[],outputs:[{name:"totalScore",type:"uint64"},{name:"avgHi",type:"uint32"},{name:"avgLo",type:"uint32"},{name:"jurorsVoted",type:"uint16"},{name:"entries",type:"uint16"}]},{name:"getContestInfo",inputs:[],outputs:[{name:"title",type:"bytes"},{name:"link",type:"bytes"},{name:"hash",type:"uint256"},{name:"juryAddr",type:"address"},{name:"juryKeys",type:"uint256[]"},{name:"juryAddresses",type:"address[]"},{name:"maxVotingAttempts",type:"uint8"}]},{name:"getContestProgress",inputs:[],outputs:[{name:"votesCount",type:"uint64"},{name:"contendersCount",type:"uint16"},{name:"contestOpen",type:"bool"},{name:"votingOpen",type:"bool"},{name:"contestDeadline",type:"uint64"},{name:"votingDeadline",type:"uint64"},{name:"resultsFinalized",type:"bool"}]},{name:"getInfoFor",inputs:[{name:"id",type:"uint16"}],outputs:[{name:"addr",type:"address"},{name:"forumLink",type:"bytes"},{name:"fileLink",type:"bytes"},{name:"hash",type:"uint256"},{name:"appliedAt",type:"uint64"},{name:"contact",type:"address"}]},{name:"getContendersInfo",inputs:[],outputs:[{name:"ids",type:"uint16[]"},{name:"addrs",type:"address[]"},{name:"forumLinks",type:"bytes[]"},{name:"fileLinks",type:"bytes[]"},{name:"hashes",type:"uint256[]"},{name:"appliedAts",type:"uint64[]"},{name:"contacts",type:"address[]"}]},{name:"getVotes",inputs:[],outputs:[{name:"votes",type:"uint64"}]},{name:"getVotesFor",inputs:[{name:"id",type:"uint16"}],outputs:[{name:"votes",type:"uint16"}]},{name:"getTotalRatingFor",inputs:[{name:"id",type:"uint16"}],outputs:[{name:"rating",type:"uint64"}]},{name:"resultsFinalized",inputs:[],outputs:[{name:"flag",type:"bool"}]},{name:"getFinalStatusFor",inputs:[{name:"id",type:"uint16"}],outputs:[{name:"status",type:"bool"}]},{name:"getFinalStatus",inputs:[],outputs:[{name:"status",type:"bool[]"}]},{name:"getFinalContestStats",inputs:[],outputs:[{name:"totalScore",type:"uint64"},{name:"avgHi",type:"uint32"},{name:"avgLo",type:"uint32"},{name:"jurorsVoted",type:"uint16"},{name:"entries",type:"uint16"},{name:"passed",type:"uint16"},{name:"rejected",type:"uint16"}]},{name:"getFinalStatsFor",inputs:[{name:"id",type:"uint16"}],outputs:[{name:"status",type:"bool"},{name:"totalPoints",type:"uint64"},{name:"avgHi",type:"uint32"},{name:"avgLo",type:"uint32"},{name:"jurorsVoted",type:"uint16"},{name:"accepted",type:"uint16"},{name:"abstained",type:"uint16"},{name:"rejected",type:"uint16"}]},{name:"getFinalVotingData",inputs:[],outputs:[{name:"ids",type:"uint16[]"},{name:"juryAddresses",type:"address[]"},{name:"statuses",type:"bool[]"},{name:"totalRatings",type:"uint64[]"},{name:"jurorsVoted",type:"uint16[]"},{name:"votesFor",type:"uint16[]"},{name:"votesAbstained",type:"uint16[]"},{name:"votesAgainst",type:"uint16[]"}]},{name:"transfer",inputs:[{name:"dest",type:"address"},{name:"value",type:"uint64"},{name:"bounce",type:"bool"},{name:"flags",type:"uint16"}],outputs:[]},{name:"forceContest",inputs:[{name:"flag",type:"bool"}],outputs:[]},{name:"forceVoting",inputs:[{name:"flag",type:"bool"}],outputs:[]},{name:"forceFinalize",inputs:[{name:"flag",type:"bool"}],outputs:[]},{name:"setContestDeadline",inputs:[{name:"time",type:"uint64"}],outputs:[]},{name:"setVotingDeadline",inputs:[{name:"time",type:"uint64"}],outputs:[]},{name:"upgrade",inputs:[{name:"c",type:"cell"}],outputs:[]}],data:[{key:1,name:"debugNonce",type:"uint256"}],events:[]}},43:function(e,t){},47:function(e,t,n){"use strict";(function(e){var s=n(13),r=n(2),a=n.n(r),c=n(3),o=n(15),i=n(35),u=n(6),l=n(16),d=n(17),p=n(34),m=n(41),b=n(69),j=n(42),h=new(function(){function t(){Object(l.a)(this,t),this.bocCache=new Map,this.votesPerJurorCache={}}return Object(d.a)(t,[{key:"init",value:function(){m.TonClient.useBinaryLibrary(b.a),this.client=new m.TonClient({network:{server_address:"main.ton.dev"}})}},{key:"getContestSubmissionsAndJurors",value:function(){var t=Object(u.a)(a.a.mark((function t(n){var s,r,l,d,m,b,j,h=this,f=arguments;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s=f.length>1&&void 0!==f[1]&&f[1],n){t.next=3;break}return t.abrupt("return");case 3:return t.prev=3,t.next=6,this.runContestFunction(n,"getContendersInfo");case 6:return r=t.sent,l=r.ids.map((function(t,n){var s=parseInt(r.appliedAts[n].substr(0,10),10),a=new Date(1e3*s);return{id:parseInt(t,10),title:"Submission ".concat(parseInt(t,10)),participantAddress:r.addrs[n],discussionLink:e.from(r.forumLinks[n],"hex").toString(),fileLink:e.from(r.fileLinks[n],"hex").toString(),hash:r.hashes[n],createdAt:a,createdAtTimestamp:s,contactAddress:r.contacts[n]}})),d={},t.next=11,Promise.all(l.map(function(){var e=Object(u.a)(a.a.mark((function e(t){var r,u,l,m,b,j,f,v,y,O,_,x,g;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g=function(e,t){e.forEach((function(e){d[e]?d[e][t]=(d[e][t]||0)+1:d[e]=Object(o.a)({},t,1)}))},r=p.a.getState().contest.removedJurors,u=r[n]||[],e.next=5,h.getVotesPerJurorForSubmission(n,t.id,s);case 5:return l=e.sent,m=l.jurorsFor,b=l.jurorsAbstained,j=l.jurorsAgainst,f=l.marks,v=[],y=f.reduce((function(e,t,n){var s=m[n];return u.includes(s)?e:(v.push(s),[].concat(Object(i.a)(e),[{mark:t,juryAddr:s}]))}),[]),O=b.filter((function(e){return!u.includes(e)})),_=j.filter((function(e){return!u.includes(e)})),x={marks:y,jurorsAbstained:O,jurorsReject:_,abstainAmount:O.length,rejectAmount:_.length},g(v,"acceptAmount"),g(O,"abstainAmount"),g(_,"rejectAmount"),e.abrupt("return",Object(c.a)(Object(c.a)({},t),x));case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 11:for(j in m=t.sent,b=1,d)d[j].id=b,b++;return t.abrupt("return",{submissionsWithStats:m,juryStats:d});case 17:return t.prev=17,t.t0=t.catch(3),console.error("Getting contest submissions failed: ",t.t0),t.abrupt("return",{submissionsWithStats:[],juryStats:{}});case 21:case"end":return t.stop()}}),t,this,[[3,17]])})));return function(e){return t.apply(this,arguments)}}()},{key:"getVotesPerJurorForSubmission",value:function(){var e=Object(u.a)(a.a.mark((function e(t,n,s){var r,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&n){e.next=2;break}return e.abrupt("return");case 2:if(!s||!(null===(r=this.votesPerJurorCache[t])||void 0===r?void 0:r.has(n))){e.next=4;break}return e.abrupt("return",this.votesPerJurorCache[t].get(n));case 4:return e.next=6,this.runContestFunction(t,"getVotesPerJuror",{id:n});case 6:return c=e.sent,this.votesPerJurorCache[t]?this.votesPerJurorCache[t].set(n,c):this.votesPerJurorCache[t]=new Map([[n,c]]),e.abrupt("return",c);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n,s){return e.apply(this,arguments)}}()},{key:"getContestInfo",value:function(){var t=Object(u.a)(a.a.mark((function t(n){var r,o,i,u,l,d;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Promise.all([this.runContestFunction(n,"getContestInfo"),this.runContestFunction(n,"getContestProgress")]);case 3:return r=t.sent,o=Object(s.a)(r,2),i=o[0],u=o[1],l=e.from(i.link,"hex").toString(),d=e.from(i.title,"hex").toString(),t.abrupt("return",Object(c.a)(Object(c.a)(Object(c.a)({},i),u),{},{link:l,title:d}));case 10:t.prev=10,t.t0=t.catch(0),console.error("Getting full contest info failed:",t.t0);case 13:case"end":return t.stop()}}),t,this,[[0,10]])})));return function(e){return t.apply(this,arguments)}}()},{key:"isAddressValid",value:function(){var e=Object(u.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.client.utils.convert_address({address:t,output_format:{type:"Hex"}});case 3:return n=e.sent,e.abrupt("return",!!n);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",!1);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"runContestFunction",value:function(){var e=Object(u.a)(a.a.mark((function e(t,n,s){var r,c,o,i,u,l,d;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!this.bocCache.has(t)){e.next=5;break}c=this.bocCache.get(t),e.next=11;break;case 5:return o={collection:"accounts",filter:{id:{eq:t}},result:"id, boc"},e.next=8,this.client.net.wait_for_collection(o);case 8:i=e.sent,c=i.result.boc,this.bocCache.set(t,c);case 11:return u={abi:{type:"Contract",value:j.a},address:t,call_set:{function_name:n},signer:{type:"None"}},s&&(u.call_set.input=s),e.next=15,this.client.abi.encode_message(u);case 15:return l=e.sent,e.next=18,this.client.tvm.run_tvm({message:l.message,account:c,abi:{type:"Contract",value:j.a}});case 18:return d=e.sent,e.abrupt("return",null===(r=d.decoded)||void 0===r?void 0:r.output);case 22:e.prev=22,e.t0=e.catch(0),console.error("Contest function ".concat(n," executeion failed: "),e.t0);case 25:case"end":return e.stop()}}),e,this,[[0,22]])})));return function(t,n,s){return e.apply(this,arguments)}}()}]),t}());t.a=h}).call(this,n(79).Buffer)},8:function(e,t,n){"use strict";n.d(t,"c",(function(){return s})),n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return a})),n.d(t,"f",(function(){return c})),n.d(t,"d",(function(){return o})),n.d(t,"g",(function(){return i})),n.d(t,"e",(function(){return u})),n.d(t,"i",(function(){return l})),n.d(t,"h",(function(){return d})),n.d(t,"l",(function(){return p})),n.d(t,"j",(function(){return m})),n.d(t,"m",(function(){return b})),n.d(t,"k",(function(){return j}));var s="contest/SET_CONTEST_INFO",r="contest/SET_BULK_CONTESTS_INFO",a="contest/ADD_BULK_CONTESTS_INFO",c="contest/SET_SUBMISSIONS_INFO",o="contest/SET_JURY_INFO",i="contest/UPDATE_SUBMISSION_REWARD",u="contest/SET_REMOVED_JUROR",l=function(e){return function(t){t({type:s,payload:e})}},d=function(e){return function(t){t({type:r,payload:e})}},p=function(e,t){return function(n){n({type:c,payload:{address:e,submissions:t}})}},m=function(e,t){return function(n){n({type:o,payload:{address:e,juryStats:t}})}},b=function(e){return function(t){t({type:i,payload:e})}},j=function(e,t){return{type:u,payload:{address:e,juryAddr:t}}}}},[[129,1,2]]]);
//# sourceMappingURL=main.9722ffd5.chunk.js.map
(this["webpackJsonpresults-interface"]=this["webpackJsonpresults-interface"]||[]).push([[0],{109:function(e,t,n){},112:function(e,t,n){},113:function(e,t,n){},114:function(e,t,n){},115:function(e,t,n){},116:function(e,t,n){},117:function(e,t,n){},118:function(e,t,n){},122:function(e,t,n){"use strict";n.r(t);var s=n(1),r=n(25),a=n.n(r),c=n(13),o=n(15),i=n(41),u=n(2),l=n.n(u),d=n(6),p=n(11),m=n(12),b=n(63),j=n(4),f=new(function(){function e(){Object(p.a)(this,e)}return Object(m.a)(e,[{key:"init",value:function(){this.client=Object(b.a)({space:"02r1z9muycae",environment:"master",accessToken:"3tSpi5F2qmkrKSHKTXIzywLQnoKGF3bANLyL7AMR6kg"})}},{key:"getContests",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.skip,n=void 0===t?0:t,s=e.governance,r=e.address,a={skip:n,content_type:j.DB_CONTENT_TYPES.CONTEST};return s&&(a["fields.governance.sys.contentType.sys.id"]=j.DB_CONTENT_TYPES.GOVERNANCE,a["fields.governance.fields.name"]=s),r&&(a["fields.address"]=r),this.client.getEntries(a)}},{key:"getContestByAddress",value:function(){var e=Object(d.a)(l.a.mark((function e(t){var n,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.getContests({address:t});case 3:return n=e.sent,(s=n.items[0].fields).governance=s.governance.fields.name,e.abrupt("return",s);case 9:return e.prev=9,e.t0=e.catch(0),console.warn("No contest found in DB by address: ",t),e.abrupt("return",{governance:j.DEFAULT_GOVERNANCE.NAME});case 13:case"end":return e.stop()}}),e,this,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getGovernances",value:function(){var e=Object(d.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.client.getEntries({content_type:j.DB_CONTENT_TYPES.GOVERNANCE,order:"fields.name"});case 3:return t=e.sent,n=t.items.map((function(e){return e.fields})),e.abrupt("return",n);case 8:return e.prev=8,e.t0=e.catch(0),console.error("Failed to fetch governances: ",e.t0),e.abrupt("return",[]);case 12:case"end":return e.stop()}}),e,this,[[0,8]])})));return function(){return e.apply(this,arguments)}}()}]),e}()),h=n(19),v=n(59),y=n(3),O="contest/SET_CONTEST_INFO",_="contest/SET_BULK_CONTESTS_INFO",x="contest/ADD_BULK_CONTESTS_INFO",g="contest/SET_SUBMISSIONS_INFO",A="contest/SET_JURY_INFO",S="contest/UPDATE_SUBMISSION_REWARD",w=function(e){return function(t){t({type:O,payload:e})}},C={contestsInfo:{},submissionsInfo:{},jurorsInfo:{}};var k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments.length>1?arguments[1]:void 0,n=t.type,s=t.payload;switch(n){case O:var r=Object(y.a)({},e.contestsInfo);return r[s.address]=s,Object(y.a)(Object(y.a)({},e),{},{contestsInfo:r});case _:var a={};return s.forEach((function(e){a[e.address]=e})),Object(y.a)(Object(y.a)({},e),{},{contestsInfo:a});case x:var c=Object(y.a)({},e.contestsInfo);return s.forEach((function(e){c[e.address]=e})),Object(y.a)(Object(y.a)({},e),{},{contestsInfo:c});case g:var o=s.address,i=s.submissions,u=Object(y.a)({},e.submissionsInfo);return u[o]=i,Object(y.a)(Object(y.a)({},e),{},{submissionsInfo:u});case A:var l=s.address,d=s.juryStats,p=Object(y.a)({},e.jurorsInfo);return p[l]=d,Object(y.a)(Object(y.a)({},e),{},{jurorsInfo:p});case S:var m=s.contestAddress,b=s.submissionId,j=s.reward,f=Object(y.a)({},e.submissionsInfo),h=f[m],v=h.map((function(e){return e.id===b?Object(y.a)(Object(y.a)({},e),{},{reward:j}):e}));return f[m]=v,Object(y.a)(Object(y.a)({},e),{},{submissionsInfo:f});default:return e}},E="common/SET_SELECTED_SUBGOV",N={selectedGovernance:{name:j.DEFAULT_GOVERNANCE.NAME,fullName:j.DEFAULT_GOVERNANCE.FULL_NAME}};var I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,t=arguments.length>1?arguments[1]:void 0,n=t.type,s=t.payload;switch(n){case E:return Object(y.a)(Object(y.a)({},e),{},{selectedGovernance:s||N.selectedGovernance});default:return e}},T=Object(h.c)({contest:k,common:I}),R=[v.a],L=h.d.apply(void 0,[h.a.apply(void 0,R)].concat([])),P=Object(h.e)(T,{},L),F=n(18),V=n(17),U=n(7),J=(n(109),n(0)),D=function(e){Object(F.a)(n,e);var t=Object(V.a)(n);function n(){return Object(p.a)(this,n),t.apply(this,arguments)}return Object(m.a)(n,[{key:"render",value:function(){return Object(J.jsx)("div",{className:"app-container",children:Object(J.jsxs)("div",{className:"app-container__flex-wrapper",children:[Object(J.jsx)(ue,{}),Object(J.jsxs)(U.c,{children:[Object(J.jsx)(U.a,{exact:!0,path:"/",component:Ie}),Object(J.jsx)(U.a,{path:"/contest",component:Se})]})]})})}}]),n}(s.Component),B=function(e){var t=e.onClick,n=void 0===t?function(){return!1}:t;return Object(J.jsxs)("svg",{className:"lens-icon",width:"22",height:"22",viewBox:"0 0 22 22",fill:"none",xmlns:"http://www.w3.org/2000/svg",onClick:n,children:[Object(J.jsx)("path",{d:"M16.8881 8.72414C16.8881 13.2678 13.2179 16.9483 8.69405 16.9483C4.17023 16.9483 0.5 13.2678 0.5 8.72414C0.5 4.18044 4.17023 0.5 8.69405 0.5C13.2179 0.5 16.8881 4.18044 16.8881 8.72414Z",stroke:"#6F6F6F"}),Object(J.jsx)("line",{y1:"-0.5",x2:"9.63903",y2:"-0.5",transform:"matrix(0.705884 0.708327 -0.705884 0.708327 14.3643 15.1724)",stroke:"#6F6F6F"})]})},Y=function(){return Object(J.jsx)("svg",{className:"arrow-icon",width:"14",height:"9",viewBox:"0 0 14 9",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:Object(J.jsx)("path",{d:"M6.76449 9L0.338936 0.230769L13.19 0.23077L6.76449 9Z",fill:"#737373"})})},G=function(){return Object(J.jsxs)("svg",{className:"checked-icon",width:"20",height:"14",viewBox:"0 0 20 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[Object(J.jsx)("rect",{x:"1.63672",y:"5.36548",width:"9.96256",height:"1.81138",transform:"rotate(45 1.63672 5.36548)",fill:"#6F6F6F"}),Object(J.jsx)("rect",{x:"19.0166",y:"2.06494",width:"16.4416",height:"1.81138",transform:"rotate(135 19.0166 2.06494)",fill:"#6F6F6F"})]})},M=function(){return Object(J.jsx)("svg",{className:"back-icon",width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:Object(J.jsx)("path",{d:"M11.0156 2L3.00018 10.0154L11.0156 18.0309",stroke:"#5287C3",strokeWidth:"3"})})};var K=function(e){return new Date(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds())};function W(e){return e.map((function(e){return{place:e.place,reward:-1===e.reward?0:e.reward,id:e.id,score:e.score,acceptAmount:e.acceptAmount,rejectAmount:e.rejectAmount,address:e.participantAddress,link:e.fileLink}}))}function z(e){var t=[];for(var n in e){var s=e[n],r=s.acceptAmount,a=void 0===r?0:r,c=s.abstainAmount,o=void 0===c?0:c,i=s.rejectAmount,u=void 0===i?0:i,l=s.id,d=a+u+o;t.push({id:l,totalVotes:d,acceptAmount:a,abstainAmount:o,rejectAmount:u,address:n})}return t}function H(){return(H=Object(d.a)(l.a.mark((function e(t,n,s,r){var a,c,o,i,u,d;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=W(n),c=z(s),o={title:t.title,link:t.link,submissions:a,jury:c,juryRewardPercent:r},i=JSON.stringify(o),e.next=6,fetch("/api/v1/export-excel",{method:"POST",headers:{"Content-Type":"application/json"},body:i});case 6:return u=e.sent,e.next=9,u.blob();case 9:d=e.sent,function(e){var t=document.createElement("a");t.download="".concat(o.title,".xlsx"),t.href=e,t.click()}(URL.createObjectURL(d));case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var X=function(e,t,n,s){return H.apply(this,arguments)},q=n(16);var Z=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:j.SORT_BY_VALUES_PARTICIPANTS.DEFAULT,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=e.sort((function(e,s){var r=e[t],a=s[t];return"string"===typeof r&&(r=parseInt(r,10)),"string"===typeof a&&(a=parseInt(a,10)),n?r-a:a-r}));return s},Q=n(14);var $=function(e){if(!e)return!1;try{var t={};for(var n in e){var s=n.split("-"),r=Object(Q.a)(s,2),a=r[0],c=r[1];if(c)for(var o=parseInt(a,10),i=parseInt(c,10),u=o;u<=i;u++)t[u]=e[n];else t[a]=e[a]}return t}catch(l){return console.error("Error while parsing rewards: ",l),!1}};var ee=function(e,t){var n=e.map((function(e){var t=0===e.marks.length?e.rejectAmount>0:e.marks.length/e.rejectAmount<1,n=Object(y.a)(Object(y.a)({},e),{},{isRejected:t});if(t)n.reward=0,n.score=0;else{var s=(n.marks.reduce((function(e,t){return e+parseInt(t,10)}),0)/n.marks.length).toFixed(2);n.score=+s}return n.acceptAmount=n.marks.length,n}));return function(e,t){var n,s,r=$(t),a={},c=e.map((function(e,t,s){var c,o=s[t-1],i=t+1;return c=e.isRejected?0:r?r[i]||0:-1,o&&o.score===e.score&&0!==e.score&&(a[t-1]=n,a[t]=c),n=c,Object(y.a)(Object(y.a)({},e),{},{place:i,reward:c})})),o={},i=+Object.keys(a).pop();for(var u in a){var l=+u,d=l===i;if((!s||s+1===l&&c[s].score===c[l].score)&&!d)o[l]=a[l];else{d&&(o[l]=a[l]);var p=Object.values(o),m=p.reduce((function(e,t){return e+t}),0)/p.length;for(var b in o)c[b].reward=m;o=Object(q.a)({},l,a[l])}s=l}return c}(Z(n,j.SORT_BY_VALUES_PARTICIPANTS.SCORE),t)};var te=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:j.SORT_BY_VALUES_JURY.DEFAULT,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=[];for(var r in e){var a=e[r],c=a.acceptAmount,o=void 0===c?0:c,i=a.abstainAmount,u=void 0===i?0:i,l=a.rejectAmount,d=void 0===l?0:l,p=a.id,m=o+d+u;s.push({address:r,acceptAmount:o,abstainAmount:u,rejectAmount:d,totalVotes:m,id:p})}var b=s.sort((function(e,s){var r=e[t],a=s[t];return"string"===typeof r&&(r=parseInt(r,10)),"string"===typeof a&&(a=parseInt(a,10)),n?r-a:a-r})),f=b.reduce((function(e,t){var n=t.address,s=t.acceptAmount,r=t.abstainAmount,a=t.rejectAmount,c=t.id;return Object(y.a)(Object(y.a)({},e),{},Object(q.a)({},n,{acceptAmount:s,abstainAmount:r,rejectAmount:a,id:c}))}),{});return f};var ne=function(e){return"/contest?contestAddress=".concat(e)};var se=function(e){return"".concat(j.EXPLORER_BASE_URL).concat(e)};var re=function(e){return e.toLocaleString()};var ae=function(e,t,n,s,r,a){return(e+t)/(n+s)*r*a/100};n(112);var ce=function(e){Object(F.a)(n,e);var t=Object(V.a)(n);function n(){var e;Object(p.a)(this,n);for(var s=arguments.length,r=new Array(s),a=0;a<s;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).state={inputValue:"",isInvalidAddress:!1},e.searchContest=Object(d.a)(l.a.mark((function t(){var n,s,r,a,c,o,u;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.state.inputValue,s=e.props,r=s.contestsInfo,a=s.history,c=s.setContestInfo,n){t.next=4;break}return t.abrupt("return");case 4:return t.next=6,i.a.isAddressValid(n);case 6:if(t.sent){t.next=9;break}return t.abrupt("return",e.setState({isInvalidAddress:!0}));case 9:if(r[n]){t.next=18;break}return t.next=13,i.a.getContestInfo(n);case 13:if(o=t.sent){t.next=16;break}return t.abrupt("return",e.setState({isInvalidAddress:!0}));case 16:o.address=n,c(o);case 18:return u=ne(n),t.abrupt("return",a.push(u));case 20:case"end":return t.stop()}}),t)}))),e.handleInputChange=function(t){e.setState({inputValue:t.target.value,isInvalidAddress:!1})},e.handleKeyPress=function(t){var n=t.shiftKey,s=t.key,r=t.altKey;"Enter"===s&&!n&&!r&&(t.preventDefault(),e.searchContest())},e}return Object(m.a)(n,[{key:"render",value:function(){var e=this.state,t=e.inputValue,n=e.isInvalidAddress,s="search-bar-container ".concat(n?"search-bar-container--invalid":"");return Object(J.jsxs)("div",{className:s,children:[Object(J.jsx)("input",{className:"search-bar-container__input",type:"text",placeholder:"Enter contest address",value:t,onChange:this.handleInputChange,onKeyPress:this.handleKeyPress}),Object(J.jsx)(B,{onClick:this.searchContest})]})}}]),n}(s.Component),oe=Object(c.b)((function(e){return{contestsInfo:e.contest.contestsInfo}}),{setContestInfo:w})(ce),ie=Object(U.h)(oe),ue=(n(113),function(){var e=Object(U.g)("/contest");return Object(J.jsxs)("header",{className:"header-container",children:[Object(J.jsx)(o.b,{to:"/",children:Object(J.jsx)("h1",{children:"Free TON Contests Results"})}),e&&Object(J.jsxs)(o.b,{to:"/",className:"header-container__back-button",children:[Object(J.jsx)(M,{}),Object(J.jsx)("p",{children:"Back"})]}),Object(J.jsx)(ie,{}),Object(J.jsx)("div",{className:"header-container__address-explanation",children:"Where to find contest address?"})]})}),le=(n(114),function(e){var t=e.contestInfo,n=e.setJuryView,s=e.exportExcel,r=e.isJuryView,a=e.juryRewardPercent,c=e.setJuryRewardPercent,o="number"===typeof a&&!Number.isNaN(a),i="contest-header__participants-view-button ".concat(r?"":"contest-header__participants-view-button--active"),u="contest-header__jury-view-button ".concat(r?"contest-header__jury-view-button--active":""),l="contest-header__reward-input-container ".concat(o?"contest-header__reward-input-container--filled":"");return Object(J.jsxs)("div",{className:"contest-header",children:[Object(J.jsx)("div",{className:"contest-header__header",children:"Results"}),Object(J.jsx)("a",{href:t.link,target:"_blank",rel:"noreferrer",className:"contest-header__title",children:t.title}),Object(J.jsxs)("div",{className:"contest-header__controls",children:[Object(J.jsxs)("div",{className:"contest-header__view-switcher",children:[Object(J.jsx)("div",{onClick:function(){return n(!1)},className:i,children:"Participants"}),Object(J.jsx)("div",{onClick:function(){return n(!0)},className:u,children:"Jury"})]}),r&&Object(J.jsxs)("div",{className:l,children:[Object(J.jsx)("input",{className:"contest-header__reward-input",type:"text",placeholder:"Enter jury reward %",value:a,onChange:function(e){if(!e.target.value)return c(void 0);var t=+e.target.value;t&&!Number.isNaN(t)&&c(t)}}),Object(J.jsx)(G,{})]}),Object(J.jsx)("div",{onClick:s,className:"contest-header__export-button",children:"Export to .xlsx"})]})]})}),de=function(e){var t=e.children,n=e.className,s=e.onClick,r=void 0===s?function(){return!1}:s,a=e.styles,c=void 0===a?{}:a,o="contest-table__cell contest-table__cell--th";return n&&(o+=" "+n),Object(J.jsx)("th",{style:c,onClick:r,className:o,children:t})},pe={color:"#0F8CFF",fontSize:"26px"},me={color:"#0D9F1C"},be={color:"#D20808"},je=function(e){var t=e.submissionsSortParams,n=e.sortSubmissions,s=t.field,r=t.isAskending,a="".concat(s===j.SORT_BY_VALUES_PARTICIPANTS.PLACE?"contest-table__cell--active ".concat(r?"contest-table__cell--askending":""):"contest-table__cell--selectable"),c="".concat(s===j.SORT_BY_VALUES_PARTICIPANTS.SUBMISSION_ID?"contest-table__cell--active ".concat(r?"contest-table__cell--askending":""):"contest-table__cell--selectable"),o="".concat(s===j.SORT_BY_VALUES_PARTICIPANTS.ACCEPTED?"contest-table__cell--active ".concat(r?"contest-table__cell--askending":""):"contest-table__cell--selectable"),i="".concat(s===j.SORT_BY_VALUES_PARTICIPANTS.REJECTED?"contest-table__cell--active ".concat(r?"contest-table__cell--askending":""):"contest-table__cell--selectable");return Object(J.jsxs)("tr",{className:"contest-table__row",children:[Object(J.jsxs)(de,{className:a,onClick:function(){return n(j.SORT_BY_VALUES_PARTICIPANTS.PLACE)},children:["Place",Object(J.jsx)(Y,{})]}),Object(J.jsx)(de,{children:"Reward"}),Object(J.jsxs)(de,{className:c,onClick:function(){return n(j.SORT_BY_VALUES_PARTICIPANTS.SUBMISSION_ID)},children:["Submission \u2116",Object(J.jsx)(Y,{})]}),Object(J.jsx)(de,{children:"Avg. Score"}),Object(J.jsxs)(de,{className:o,onClick:function(){return n(j.SORT_BY_VALUES_PARTICIPANTS.ACCEPTED)},children:["Accepted",Object(J.jsx)(Y,{})]}),Object(J.jsxs)(de,{className:i,onClick:function(){return n(j.SORT_BY_VALUES_PARTICIPANTS.REJECTED)},children:["Rejected",Object(J.jsx)(Y,{})]}),Object(J.jsx)(de,{className:"contest-table__cell--wallet",children:"Wallet"})]})},fe=function(e){var t=e.jurySortParams,n=e.sortJury,s=t.field,r=t.isAskending,a="".concat(s===j.SORT_BY_VALUES_JURY.JURY_ID?"contest-table__cell--active ".concat(r?"contest-table__cell--askending":""):"contest-table__cell--selectable"),c="".concat(s===j.SORT_BY_VALUES_JURY.TOTAL_VOTES?"contest-table__cell--active ".concat(r?"contest-table__cell--askending":""):"contest-table__cell--selectable"),o="".concat(s===j.SORT_BY_VALUES_JURY.ACCEPTED?"contest-table__cell--active ".concat(r?"contest-table__cell--askending":""):"contest-table__cell--selectable"),i="".concat(s===j.SORT_BY_VALUES_JURY.ABSTAINED?"contest-table__cell--active ".concat(r?"contest-table__cell--askending":""):"contest-table__cell--selectable"),u="".concat(s===j.SORT_BY_VALUES_JURY.REJECTED?"contest-table__cell--active ".concat(r?"contest-table__cell--askending":""):"contest-table__cell--selectable");return Object(J.jsxs)("tr",{className:"contest-table__row",children:[Object(J.jsxs)(de,{className:a,onClick:function(){return n(j.SORT_BY_VALUES_JURY.JURY_ID)},children:["Jury \u2116",Object(J.jsx)(Y,{})]}),Object(J.jsx)(de,{children:"Reward"}),Object(J.jsxs)(de,{className:c,onClick:function(){return n(j.SORT_BY_VALUES_JURY.TOTAL_VOTES)},children:["Votes Count",Object(J.jsx)(Y,{})]}),Object(J.jsxs)(de,{className:o,onClick:function(){return n(j.SORT_BY_VALUES_JURY.ACCEPTED)},children:["Accepted",Object(J.jsx)(Y,{})]}),Object(J.jsxs)(de,{className:i,onClick:function(){return n(j.SORT_BY_VALUES_JURY.ABSTAINED)},children:["Abstained",Object(J.jsx)(Y,{})]}),Object(J.jsxs)(de,{className:u,onClick:function(){return n(j.SORT_BY_VALUES_JURY.REJECTED)},children:["Rejected",Object(J.jsx)(Y,{})]}),Object(J.jsx)(de,{className:"contest-table__cell--wallet",children:"Wallet"})]})},he=function(e){var t=e.contestInfo,n=e.isJuryView,s=e.submissionsSortParams,r=e.jurySortParams,a=e.sortSubmissions,c=e.sortJury,o=t.title;return Object(J.jsxs)("thead",{className:"contest-table__header",children:[Object(J.jsx)("tr",{className:"contest-table__header-hidden-line",children:Object(J.jsx)("th",{colSpan:"7"})}),Object(J.jsx)("tr",{className:"contest-table__header-hidden-line",children:Object(J.jsx)("th",{colSpan:"7",style:pe,children:Object(J.jsx)("a",{href:t.link,children:o})})}),n?Object(J.jsx)(fe,{jurySortParams:r,sortJury:c}):Object(J.jsx)(je,{submissionsSortParams:s,sortSubmissions:a})]})},ve=function(e){var t=e.children,n=e.className,s=e.styles,r=void 0===s?{}:s,a="contest-table__cell";return n&&(a+=" "+n),Object(J.jsx)("td",{style:r,className:a,children:t})},ye=function(e){var t=e.contestAddress,n=e.submissionId,r=Object(s.useState)(),a=Object(Q.a)(r,2),o=a[0],i=a[1],u=Object(c.c)(),l=function(){var e;o&&u((e={contestAddress:t,submissionId:n,reward:o},function(t){t({type:S,payload:e})}))};return Object(J.jsx)("input",{className:"contest-table__reward-input",type:"text",placeholder:"Enter reward",value:o,onChange:function(e){if(!e.target.value)return i(void 0);var t=+e.target.value;t&&!Number.isNaN(t)&&i(t)},onBlur:l,onKeyPress:function(e){var t=e.shiftKey,n=e.key,s=e.altKey;"Enter"===n&&!t&&!s&&(e.preventDefault(),l())}})},Oe=function(e){var t=e.contestSubmissions,n=e.isJuryView,s=e.contestJury,r=e.juryRewardPercent,a=e.contestAddress;if(!t.length)return Object(J.jsx)("div",{children:"no subm"});var c,o=0,i=t.map((function(e,t){"number"===typeof e.reward&&!Number.isNaN(e.reward)&&e.reward>0&&(o+=e.reward);var n=e.score.toFixed(2),s="contest-table__row ".concat(0===t||t%2===0?"contest-table__row--grey":""," ").concat(e.isRejected?"contest-table__row--rejected":""),r=se(e.participantAddress),c=!e.isRejected&&-1===e.reward,i=re(e.reward);return Object(J.jsxs)("tr",{className:s,children:[Object(J.jsx)(ve,{children:e.place}),Object(J.jsx)(ve,{children:c?Object(J.jsx)(ye,{contestAddress:a,submissionId:e.id}):i}),Object(J.jsx)(ve,{children:e.fileLink?Object(J.jsx)("a",{href:e.fileLink,target:"_blank",rel:"noreferrer",children:e.id}):e.id}),Object(J.jsx)(ve,{children:n}),Object(J.jsx)(ve,{styles:me,children:e.acceptAmount}),Object(J.jsx)(ve,{styles:be,children:e.rejectAmount}),Object(J.jsx)(ve,{className:"contest-table__cell--wallet",children:Object(J.jsx)("a",{href:r,target:"_blank",rel:"noreferrer",children:e.participantAddress})})]},"".concat(e.participantAddress).concat(e.id))})),u=0,l=0,d=0,p=0;if(n){var m=[];for(var b in Object.values(s).forEach((function(e){var t=e.acceptAmount,n=void 0===t?0:t,s=e.abstainAmount,r=void 0===s?0:s,a=e.rejectAmount;u+=n,l+=void 0===a?0:a,d+=r})),s){var j=s[b],f=j.acceptAmount,h=void 0===f?0:f,v=j.abstainAmount,y=void 0===v?0:v,O=j.rejectAmount,_=void 0===O?0:O,x=j.id,g=h+_+y,A=void 0;"number"===typeof r&&!Number.isNaN(r)&&o&&(p+=A=ae(h,_,u,l,o,r));var S=0===m.length||m.length%2===0,w="contest-table__row ".concat(S?"contest-table__row--grey":""),C=se(b),k=re(+A.toFixed(2));m.push(Object(J.jsxs)("tr",{className:w,children:[Object(J.jsx)(ve,{children:x}),Object(J.jsx)(ve,{children:k}),Object(J.jsx)(ve,{children:g}),Object(J.jsx)(ve,{styles:me,children:h}),Object(J.jsx)(ve,{children:y}),Object(J.jsx)(ve,{styles:be,children:_}),Object(J.jsx)(ve,{className:"contest-table__cell--wallet",children:Object(J.jsx)("a",{href:C,target:"_blank",rel:"noreferrer",children:b})})]},b))}c=m}else c=i;return Object(J.jsxs)("tbody",{children:[c,Object(J.jsxs)("tr",{className:"contest-table__row contest-table__row--total-row",children:[Object(J.jsx)(ve,{children:"Total"}),n?Object(J.jsxs)(J.Fragment,{children:[Object(J.jsx)(ve,{children:p?re(+p.toFixed(2)):""}),Object(J.jsx)(ve,{children:u+l+d}),Object(J.jsx)(ve,{styles:me,children:u}),Object(J.jsx)(ve,{children:d}),Object(J.jsx)(ve,{styles:be,children:l}),Object(J.jsx)(ve,{})]}):Object(J.jsxs)(J.Fragment,{children:[Object(J.jsx)(ve,{children:re(o)||""}),Object(J.jsx)(ve,{}),Object(J.jsx)(ve,{}),Object(J.jsx)(ve,{}),Object(J.jsx)(ve,{}),Object(J.jsx)(ve,{})]})]})]})},_e=(n(115),{field:j.SORT_BY_VALUES_PARTICIPANTS.DEFAULT,isAskending:!0}),xe={field:j.SORT_BY_VALUES_JURY.DEFAULT,isAskending:!0},ge=function(e){Object(F.a)(n,e);var t=Object(V.a)(n);function n(){var e;Object(p.a)(this,n);for(var s=arguments.length,r=new Array(s),a=0;a<s;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).state={isJuryView:!1,juryRewardPercent:void 0,submissionsSortParams:_e,jurySortParams:xe},e.fetchSubmissionsInfo=Object(d.a)(l.a.mark((function t(){var n,s,r,a,c,o,u,d,p,m,b,j,f,h;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props,s=n.addressFromUrl,r=n.contestInfo,a=n.setContestInfo,c=n.setSubmissionsInfo,o=n.setJuryInfo,u=n.history,d=e.state.jurySortParams,t.next=4,i.a.isAddressValid(s);case 4:if(t.sent){t.next=7;break}return t.abrupt("return",u.push("/"));case 7:if(p=r){t.next=13;break}return t.next=11,e.getContestFullInfo(s);case 11:p=t.sent,a(p);case 13:return p.juryRewardPercent&&e.setJuryRewardPercent(p.juryRewardPercent),t.next=16,i.a.getContestSubmissionsAndJurors(s);case 16:m=t.sent,b=m.submissionsWithStats,j=m.juryStats,f=ee(b,p.rewards),h=te(j,d.field,d.isAskending),c(s,f),o(s,h);case 23:case"end":return t.stop()}}),t)}))),e.getContestFullInfo=function(){var e=Object(d.a)(l.a.mark((function e(t){var n,s,r,a,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([i.a.getContestInfo(t),f.getContestByAddress(t)]);case 2:return n=e.sent,s=Object(Q.a)(n,2),r=s[0],a=s[1],c=a.governance,e.abrupt("return",Object(y.a)(Object(y.a)(Object(y.a)({},r),a),{},{address:t,governance:c}));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.exportExcel=Object(d.a)(l.a.mark((function t(){var n,s,r,a,c;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props,s=n.contestInfo,r=n.contestSubmissions,a=n.contestJury,c=e.state.juryRewardPercent,t.prev=2,t.next=5,X(s,r,a,c);case 5:t.next=10;break;case 7:t.prev=7,t.t0=t.catch(2),console.error("Table export failed: ",t.t0);case 10:case"end":return t.stop()}}),t,null,[[2,7]])}))),e.setJuryView=function(t){e.setState({isJuryView:t})},e.setJuryRewardPercent=function(t){e.setState({juryRewardPercent:t})},e.sortJury=function(t){var n=e.props,s=n.contestJury,r=n.setJuryInfo,a=n.addressFromUrl,c=e.state.jurySortParams,o=c.field,i=c.isAskending,u={field:t,isAskending:t===o?!i:i};r(a,te(s,u.field,u.isAskending)),e.setState({jurySortParams:u})},e.sortSubmissions=function(t){var n=e.props,s=n.contestSubmissions,r=n.setSubmissionsInfo,a=n.addressFromUrl,c=e.state.submissionsSortParams,o=c.field,i=c.isAskending,u={field:t,isAskending:t===o?!i:i};r(a,Z(s,u.field,u.isAskending)),e.setState({submissionsSortParams:u})},e}return Object(m.a)(n,[{key:"componentDidMount",value:function(){try{this.fetchSubmissionsInfo()}catch(e){console.error("Fetching submissions failed: ",e),setTimeout(this.fetchSubmissionsInfo,5e3)}}},{key:"componentDidUpdate",value:function(e){try{var t=this.props.addressFromUrl;e.addressFromUrl!==t&&(this.setJuryView(!1),this.setState({isJuryView:!1,juryRewardPercent:void 0,submissionsSortParams:_e,jurySortParams:xe}),this.fetchSubmissionsInfo())}catch(n){console.error("Fetching submissions failed: ",n),setTimeout(this.fetchSubmissionsInfo,5e3)}}},{key:"render",value:function(){var e=this.props,t=e.contestSubmissions,n=e.contestInfo,s=e.contestJury,r=e.addressFromUrl,a=this.state,c=a.isJuryView,o=a.juryRewardPercent,i=a.submissionsSortParams,u=a.jurySortParams;return n&&t&&s?(console.log(n,t,s),Object(J.jsxs)("div",{className:"contest",children:[Object(J.jsx)(le,{contestInfo:n,isJuryView:c,juryRewardPercent:o,setJuryView:this.setJuryView,setJuryRewardPercent:this.setJuryRewardPercent,exportExcel:this.exportExcel}),Object(J.jsx)("div",{className:"contest-table-wrapper",children:Object(J.jsxs)("table",{className:"contest-table",children:[Object(J.jsx)(he,{contestInfo:n,isJuryView:c,submissionsSortParams:i,jurySortParams:u,sortSubmissions:this.sortSubmissions,sortJury:this.sortJury}),Object(J.jsx)(Oe,{contestSubmissions:t,contestJury:s,contestAddress:r,isJuryView:c,juryRewardPercent:o})]})})]})):Object(J.jsx)("div",{className:"contest",children:Object(J.jsx)(Te,{})})}}]),n}(s.Component),Ae=Object(c.b)((function(e,t){var n=e.contest,s=t.location,r=n.contestsInfo,a=n.submissionsInfo,c=n.jurorsInfo,o=s.search,i=new URLSearchParams(o).get("contestAddress");return{contestInfo:r[i],contestSubmissions:a[i],contestJury:c[i],addressFromUrl:i}}),{setContestInfo:w,setSubmissionsInfo:function(e,t){return function(n){n({type:g,payload:{address:e,submissions:t}})}},setJuryInfo:function(e,t){return function(n){n({type:A,payload:{address:e,juryStats:t}})}}})(ge),Se=Object(U.h)(Ae),we=n(65),Ce=function(e){var t=e.contest,n=e.isGrey,s=K(new Date(1e3*t.contestDeadline)).toDateString(),r=ne(t.address),a="contests-list__item ".concat(n?"contests-list__item--grey":"");return Object(J.jsxs)(o.b,{to:r,className:a,children:[Object(J.jsx)("div",{className:"contests-list__item-title",children:t.title}),Object(J.jsx)("div",{className:"contests-list__item-date",children:s})]})},ke=function(e){var t=e.governances,n=e.isListOpen,s=Object(c.c)(),r=t.map((function(e){return Object(J.jsx)("div",{className:"subgov-switcher__list-item",onClick:function(){return s((t=e,function(e){e({type:E,payload:t})}));var t},children:e.fullName},e.name)})),a="subgov-switcher__list ".concat(n?"subgov-switcher__list--visible":"");return Object(J.jsx)("div",{className:a,children:r})},Ee=function(e){var t=e.governances,n=e.selectedGovernance,r=Object(s.useRef)(null),a=Object(s.useState)(!1),c=Object(Q.a)(a,2),o=c[0],i=c[1],u=Object(s.useCallback)((function(e){var t;!(null===r||void 0===r||null===(t=r.current)||void 0===t?void 0:t.contains(e.target))&&o&&i(!1)}),[o]);Object(s.useEffect)((function(){return document.addEventListener("click",u),function(){document.removeEventListener("click",u)}}),[u]);var l="subgov-switcher__switch-block ".concat(o?"subgov-switcher__switch-block--active":""),d=t.filter((function(e){return e.name!==n.name}));return Object(J.jsxs)("div",{className:"subgov-switcher",children:[Object(J.jsx)("div",{className:"subgov-switcher__title",children:"Contests"}),Object(J.jsxs)("div",{ref:r,onClick:function(){return i(!o)},className:l,children:["Subgov: ".concat(n.fullName),Object(J.jsx)(Y,{}),Object(J.jsx)(ke,{isListOpen:o,governances:d})]})]})},Ne=(n(116),function(e){Object(F.a)(n,e);var t=Object(V.a)(n);function n(){var e;Object(p.a)(this,n);for(var s=arguments.length,r=new Array(s),a=0;a<s;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).state={governances:[],isLoaderVisible:!1},e.fetchGovernances=Object(d.a)(l.a.mark((function t(){var n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f.getGovernances();case 2:n=t.sent,e.setState({governances:n});case 4:case"end":return t.stop()}}),t)}))),e.fetchContests=Object(d.a)(l.a.mark((function t(){var n,s,r,a,c;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props,s=n.setBulkContestsInfo,r=n.selectedGovernance,t.next=3,f.getContests({governance:r.name});case 3:return a=t.sent,t.next=6,Promise.all(a.items.map((function(t){return e.getContestFullInfo(t)})));case 6:c=t.sent,s(c);case 8:case"end":return t.stop()}}),t)}))),e.getContestFullInfo=function(){var e=Object(d.a)(l.a.mark((function e(t){var n,s,r,a,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.fields,s=n.address,r=n.governance,a=Object(we.a)(n,["address","governance"]),e.next=3,i.a.getContestInfo(s);case 3:return c=e.sent,e.abrupt("return",Object(y.a)(Object(y.a)(Object(y.a)({},c),a),{},{address:s,governance:r.fields.name}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.renderContestItems=function(){return e.props.contestsInfo.map((function(e,t){return Object(J.jsx)(Ce,{isGrey:t%2===0||0===t,contest:e},e.address)}))},e}return Object(m.a)(n,[{key:"componentDidMount",value:function(){var e=Object(d.a)(l.a.mark((function e(){var t=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.props.contestsInfo.length||this.setState({isLoaderVisible:!0}),e.next=5,this.fetchGovernances();case 5:return e.next=7,this.fetchContests();case 7:this.setState({isLoaderVisible:!1}),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),console.error("Fetching contests failed: ",e.t0),setTimeout(Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.fetchGovernances();case 2:return e.next=4,t.fetchContests();case 4:t.setState({isLoaderVisible:!1});case 5:case"end":return e.stop()}}),e)}))),5e3);case 14:case"end":return e.stop()}}),e,this,[[0,10]])})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=Object(d.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t.selectedGovernance.name===this.props.selectedGovernance.name){e.next=6;break}return this.setState({isLoaderVisible:!0}),e.next=5,this.fetchContests();case 5:this.setState({isLoaderVisible:!1});case 6:e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.error("Fetching contests failed: ",e.t0),setTimeout(this.fetchContests,5e3);case 12:case"end":return e.stop()}}),e,this,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props,t=e.contestsInfo,n=e.selectedGovernance,s=this.state,r=s.governances,a=s.isLoaderVisible;return Object(J.jsxs)("div",{className:"contests-list",children:[Object(J.jsx)(Ee,{governances:r,selectedGovernance:n}),!t.length||a?Object(J.jsx)(Te,{}):this.renderContestItems()]})}}]),n}(s.Component)),Ie=Object(c.b)((function(e){var t=e.contest,n=e.common,s=t.contestsInfo,r=n.selectedGovernance;return{contestsInfo:Object.values(s),selectedGovernance:r}}),{setBulkContestsInfo:function(e){return function(t){t({type:_,payload:e})}}})(Ne),Te=(n(117),function(){return Object(J.jsx)("div",{className:"loader",children:Object(J.jsx)("img",{className:"loader__cat",src:"/loader.gif",alt:"Loading..."})})});n(118);n(119).config(),i.a.init(),f.init(),a.a.render(Object(J.jsx)(c.a,{store:P,children:Object(J.jsx)(o.a,{children:Object(J.jsx)(D,{})})}),document.getElementById("root"))},36:function(e,t,n){"use strict";t.a={"ABI version":2,header:["pubkey","time"],functions:[{name:"constructor",inputs:[{name:"title",type:"bytes"},{name:"link",type:"bytes"},{name:"hash",type:"uint256"},{name:"juryAddr",type:"address"},{name:"juryKeys",type:"uint256[]"}],outputs:[]},{name:"setupContest",inputs:[{name:"startsIn",type:"uint16"},{name:"lastsFor",type:"uint16"}],outputs:[]},{name:"setupJurors",inputs:[{name:"jurors",type:"address[]"}],outputs:[]},{name:"rejectApplicant",inputs:[],outputs:[]},{name:"submitWithContact",inputs:[{name:"participant",type:"address"},{name:"forumLink",type:"bytes"},{name:"fileLink",type:"bytes"},{name:"hash",type:"uint256"},{name:"contact",type:"address"}],outputs:[]},{name:"submit",inputs:[{name:"participant",type:"address"},{name:"forumLink",type:"bytes"},{name:"fileLink",type:"bytes"},{name:"hash",type:"uint256"}],outputs:[]},{name:"openContest",inputs:[],outputs:[]},{name:"closeContest",inputs:[],outputs:[]},{name:"openVoting",inputs:[],outputs:[]},{name:"closeVoting",inputs:[],outputs:[]},{name:"rejectVote",inputs:[],outputs:[]},{name:"voteFor",inputs:[{name:"id",type:"uint16"},{name:"mark",type:"uint32"}],outputs:[]},{name:"voteForCommented",inputs:[{name:"id",type:"uint16"},{name:"mark",type:"uint32"},{name:"comment",type:"bytes"}],outputs:[]},{name:"abstain",inputs:[{name:"id",type:"uint16"},{name:"comment",type:"bytes"}],outputs:[]},{name:"voteAgainst",inputs:[{name:"id",type:"uint16"},{name:"comment",type:"bytes"}],outputs:[]},{name:"finalizeResults",inputs:[],outputs:[]},{name:"votingEndsIn",inputs:[],outputs:[{name:"daysLeft",type:"uint64"}]},{name:"contestStartCountdown",inputs:[],outputs:[{name:"secondsLeft",type:"int64"}]},{name:"contestCountdown",inputs:[],outputs:[{name:"secondsLeft",type:"int64"}]},{name:"votingCountdown",inputs:[],outputs:[{name:"secondsLeft",type:"int64"}]},{name:"getId",inputs:[{name:"addr",type:"address"}],outputs:[{name:"value0",type:"uint16"}]},{name:"listContenders",inputs:[],outputs:[{name:"ids",type:"uint16[]"},{name:"addresses",type:"address[]"}]},{name:"getStatsFor",inputs:[{name:"id",type:"uint16"}],outputs:[{name:"totalPoints",type:"uint64"},{name:"avgHi",type:"uint32"},{name:"avgLo",type:"uint32"},{name:"jurorsVoted",type:"uint16"},{name:"accepted",type:"uint16"},{name:"abstained",type:"uint16"},{name:"rejected",type:"uint16"}]},{name:"getVotesPerJuror",inputs:[{name:"id",type:"uint16"}],outputs:[{name:"jurorsFor",type:"address[]"},{name:"marks",type:"uint32[]"},{name:"commentsFor",type:"bytes[]"},{name:"jurorsAbstained",type:"address[]"},{name:"commentsAbstained",type:"bytes[]"},{name:"jurorsAgainst",type:"address[]"},{name:"commentsAgainst",type:"bytes[]"}]},{name:"getJuryStats",inputs:[],outputs:[{components:[{name:"id",type:"uint16"},{name:"addr",type:"address"}],name:"jury",type:"map(uint256,tuple)"}]},{name:"getContestStats",inputs:[],outputs:[{name:"totalScore",type:"uint64"},{name:"avgHi",type:"uint32"},{name:"avgLo",type:"uint32"},{name:"jurorsVoted",type:"uint16"},{name:"entries",type:"uint16"}]},{name:"getContestInfo",inputs:[],outputs:[{name:"title",type:"bytes"},{name:"link",type:"bytes"},{name:"hash",type:"uint256"},{name:"juryAddr",type:"address"},{name:"juryKeys",type:"uint256[]"},{name:"juryAddresses",type:"address[]"},{name:"maxVotingAttempts",type:"uint8"}]},{name:"getContestProgress",inputs:[],outputs:[{name:"votesCount",type:"uint64"},{name:"contendersCount",type:"uint16"},{name:"contestOpen",type:"bool"},{name:"votingOpen",type:"bool"},{name:"contestDeadline",type:"uint64"},{name:"votingDeadline",type:"uint64"},{name:"resultsFinalized",type:"bool"}]},{name:"getInfoFor",inputs:[{name:"id",type:"uint16"}],outputs:[{name:"addr",type:"address"},{name:"forumLink",type:"bytes"},{name:"fileLink",type:"bytes"},{name:"hash",type:"uint256"},{name:"appliedAt",type:"uint64"},{name:"contact",type:"address"}]},{name:"getContendersInfo",inputs:[],outputs:[{name:"ids",type:"uint16[]"},{name:"addrs",type:"address[]"},{name:"forumLinks",type:"bytes[]"},{name:"fileLinks",type:"bytes[]"},{name:"hashes",type:"uint256[]"},{name:"appliedAts",type:"uint64[]"},{name:"contacts",type:"address[]"}]},{name:"getVotes",inputs:[],outputs:[{name:"votes",type:"uint64"}]},{name:"getVotesFor",inputs:[{name:"id",type:"uint16"}],outputs:[{name:"votes",type:"uint16"}]},{name:"getTotalRatingFor",inputs:[{name:"id",type:"uint16"}],outputs:[{name:"rating",type:"uint64"}]},{name:"resultsFinalized",inputs:[],outputs:[{name:"flag",type:"bool"}]},{name:"getFinalStatusFor",inputs:[{name:"id",type:"uint16"}],outputs:[{name:"status",type:"bool"}]},{name:"getFinalStatus",inputs:[],outputs:[{name:"status",type:"bool[]"}]},{name:"getFinalContestStats",inputs:[],outputs:[{name:"totalScore",type:"uint64"},{name:"avgHi",type:"uint32"},{name:"avgLo",type:"uint32"},{name:"jurorsVoted",type:"uint16"},{name:"entries",type:"uint16"},{name:"passed",type:"uint16"},{name:"rejected",type:"uint16"}]},{name:"getFinalStatsFor",inputs:[{name:"id",type:"uint16"}],outputs:[{name:"status",type:"bool"},{name:"totalPoints",type:"uint64"},{name:"avgHi",type:"uint32"},{name:"avgLo",type:"uint32"},{name:"jurorsVoted",type:"uint16"},{name:"accepted",type:"uint16"},{name:"abstained",type:"uint16"},{name:"rejected",type:"uint16"}]},{name:"getFinalVotingData",inputs:[],outputs:[{name:"ids",type:"uint16[]"},{name:"juryAddresses",type:"address[]"},{name:"statuses",type:"bool[]"},{name:"totalRatings",type:"uint64[]"},{name:"jurorsVoted",type:"uint16[]"},{name:"votesFor",type:"uint16[]"},{name:"votesAbstained",type:"uint16[]"},{name:"votesAgainst",type:"uint16[]"}]},{name:"transfer",inputs:[{name:"dest",type:"address"},{name:"value",type:"uint64"},{name:"bounce",type:"bool"},{name:"flags",type:"uint16"}],outputs:[]},{name:"forceContest",inputs:[{name:"flag",type:"bool"}],outputs:[]},{name:"forceVoting",inputs:[{name:"flag",type:"bool"}],outputs:[]},{name:"forceFinalize",inputs:[{name:"flag",type:"bool"}],outputs:[]},{name:"setContestDeadline",inputs:[{name:"time",type:"uint64"}],outputs:[]},{name:"setVotingDeadline",inputs:[{name:"time",type:"uint64"}],outputs:[]},{name:"upgrade",inputs:[{name:"c",type:"cell"}],outputs:[]}],data:[{key:1,name:"debugNonce",type:"uint256"}],events:[]}},37:function(e,t){},4:function(e,t){e.exports={SORT_BY_VALUES_PARTICIPANTS:{DEFAULT:"place",PLACE:"place",REWARD:"reward",SUBMISSION_ID:"id",SCORE:"score",ACCEPTED:"acceptAmount",REJECTED:"rejectAmount"},SORT_BY_VALUES_JURY:{DEFAULT:"id",REWARD:"reward",JURY_ID:"id",TOTAL_VOTES:"totalVotes",ACCEPTED:"acceptAmount",ABSTAINED:"abstainAmount",REJECTED:"rejectAmount"},EMPTY_ADDRESS:"0:0000000000000000000000000000000000000000000000000000000000000000",EXPLORER_BASE_URL:"https://ton.live/accounts/accountDetails?id=",DB_CONTENT_TYPES:{CONTEST:"contest",GOVERNANCE:"governance"},DEFAULT_GOVERNANCE:{NAME:"main",FULL_NAME:"Main"}}},41:function(e,t,n){"use strict";(function(e){var s=n(14),r=n(2),a=n.n(r),c=n(3),o=n(16),i=n(6),u=n(11),l=n(12),d=n(35),p=n(64),m=n(36),b=new(function(){function t(){Object(u.a)(this,t),this.bocCache=new Map}return Object(l.a)(t,[{key:"init",value:function(){d.TonClient.useBinaryLibrary(p.a),this.client=new d.TonClient({network:{server_address:"main.ton.dev"}})}},{key:"getContestSubmissionsAndJurors",value:function(){var t=Object(i.a)(a.a.mark((function t(n){var s,r,u,l,d,p=this;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,t.next=5,this.runContestFunction(n,"getContendersInfo");case 5:return s=t.sent,t.next=8,this.getJuryStatsFromContract(n);case 8:return r=t.sent,u=s.ids.map((function(t,n){var r=parseInt(s.appliedAts[n].substr(0,10),10),a=new Date(1e3*r);return{id:parseInt(t,10),title:"Submission ".concat(parseInt(t,10)),participantAddress:s.addrs[n],discussionLink:e.from(s.forumLinks[n],"hex").toString(),fileLink:e.from(s.fileLinks[n],"hex").toString(),hash:s.hashes[n],createdAt:a,createdAtTimestamp:r,contactAddress:s.contacts[n]}})),l={},t.next=13,Promise.all(u.map(function(){var e=Object(i.a)(a.a.mark((function e(t){var s,i,u,d,m,b,j;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return j=function(e,t){e.forEach((function(e){if(l[e])l[e][t]=(l[e][t]||0)+1;else{var n,s,a=null===(n=r.find((function(t){return t.addr===e})))||void 0===n?void 0:n.id,c="string"===typeof a?parseInt(a,10)+1:a;l[e]=(s={},Object(o.a)(s,t,1),Object(o.a)(s,"id",c),s)}}))},e.next=3,p.getVotesPerJurorForSubmission(n,t.id);case 3:return s=e.sent,i=s.jurorsFor,u=s.jurorsAbstained,d=s.jurorsAgainst,m=s.marks,b={marks:m,abstainAmount:u.length,rejectAmount:d.length},j(i,"acceptAmount"),j(u,"abstainAmount"),j(d,"rejectAmount"),e.abrupt("return",Object(c.a)(Object(c.a)({},t),b));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 13:return d=t.sent,t.abrupt("return",{submissionsWithStats:d,juryStats:l});case 17:return t.prev=17,t.t0=t.catch(2),console.error("Getting contest submissions failed: ",t.t0),t.abrupt("return",{submissionsWithStats:[],juryStats:{}});case 21:case"end":return t.stop()}}),t,this,[[2,17]])})));return function(e){return t.apply(this,arguments)}}()},{key:"getVotesPerJurorForSubmission",value:function(){var e=Object(i.a)(a.a.mark((function e(t,n){var s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&n){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.runContestFunction(t,"getVotesPerJuror",{id:n});case 4:return s=e.sent,e.abrupt("return",s);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getContestInfo",value:function(){var t=Object(i.a)(a.a.mark((function t(n){var r,o,i,u,l,d;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Promise.all([this.runContestFunction(n,"getContestInfo"),this.runContestFunction(n,"getContestProgress")]);case 3:return r=t.sent,o=Object(s.a)(r,2),i=o[0],u=o[1],l=e.from(i.link,"hex").toString(),d=e.from(i.title,"hex").toString(),t.abrupt("return",Object(c.a)(Object(c.a)(Object(c.a)({},i),u),{},{link:l,title:d}));case 10:t.prev=10,t.t0=t.catch(0),console.error("Getting full contest info failed:",t.t0);case 13:case"end":return t.stop()}}),t,this,[[0,10]])})));return function(e){return t.apply(this,arguments)}}()},{key:"getJuryStatsFromContract",value:function(){var e=Object(i.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.runContestFunction(t,"getJuryStats");case 2:if(null===(n=e.sent)||void 0===n?void 0:n.jury){e.next=5;break}return e.abrupt("return",[]);case 5:return e.abrupt("return",Object.values(n.jury));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"isAddressValid",value:function(){var e=Object(i.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.client.utils.convert_address({address:t,output_format:{type:"Hex"}});case 3:return n=e.sent,e.abrupt("return",!!n);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",!1);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"runContestFunction",value:function(){var e=Object(i.a)(a.a.mark((function e(t,n,s){var r,c,o,i,u,l,d;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!this.bocCache.has(t)){e.next=5;break}c=this.bocCache.get(t),e.next=11;break;case 5:return o={collection:"accounts",filter:{id:{eq:t}},result:"id, boc"},e.next=8,this.client.net.wait_for_collection(o);case 8:i=e.sent,c=i.result.boc,this.bocCache.set(t,c);case 11:return u={abi:{type:"Contract",value:m.a},address:t,call_set:{function_name:n},signer:{type:"None"}},s&&(u.call_set.input=s),e.next=15,this.client.abi.encode_message(u);case 15:return l=e.sent,e.next=18,this.client.tvm.run_tvm({message:l.message,account:c,abi:{type:"Contract",value:m.a}});case 18:return d=e.sent,e.abrupt("return",null===(r=d.decoded)||void 0===r?void 0:r.output);case 22:e.prev=22,e.t0=e.catch(0),console.error("Contest function ".concat(n," executeion failed: "),e.t0);case 25:case"end":return e.stop()}}),e,this,[[0,22]])})));return function(t,n,s){return e.apply(this,arguments)}}()}]),t}());t.a=b}).call(this,n(74).Buffer)}},[[122,1,2]]]);
//# sourceMappingURL=main.bdc4970b.chunk.js.map